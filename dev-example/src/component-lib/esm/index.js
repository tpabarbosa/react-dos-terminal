/* Version: 0.1.3 - February 9, 2022 17:49:22 */
/* eslint-disable */import{jsx as n,jsxs as e,Fragment as t}from"react/jsx-runtime";import i,{createContext as o,useReducer as r,useMemo as a,useContext as l,useState as c,useEffect as u,forwardRef as s,useRef as d,useCallback as f,createRef as m,createElement as p}from"react";import v from"lodash";import h,{css as g,keyframes as y,createGlobalStyle as w}from"styled-components";
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var b=function(){return b=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++)for(var o in e=arguments[t])Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o]);return n},b.apply(this,arguments)};function C(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(t[i[o]]=n[i[o]])}return t}function x(n,e,t,i){return new(t||(t=Promise))((function(o,r){function a(n){try{c(i.next(n))}catch(n){r(n)}}function l(n){try{c(i.throw(n))}catch(n){r(n)}}function c(n){var e;n.done?o(n.value):(e=n.value,e instanceof t?e:new t((function(n){n(e)}))).then(a,l)}c((i=i.apply(n,e||[])).next())}))}function _(n,e){var t,i,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function l(r){return function(l){return function(r){if(t)throw new TypeError("Generator is already executing.");for(;a;)try{if(t=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,i=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==r[0]&&2!==r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(n,a)}catch(n){r=[6,n],i=0}finally{t=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,l])}}}function S(n,e,t){if(t||2===arguments.length)for(var i,o=0,r=e.length;o<r;o++)!i&&o in e||(i||(i=Array.prototype.slice.call(e,0,o)),i[o]=e[o]);return n.concat(i||Array.prototype.slice.call(e))}function D(n,e){return Object.defineProperty?Object.defineProperty(n,"raw",{value:e}):n.raw=e,n}var k,F,I,E,A,T,P,O,H,N,M,R,B,L,z,U,V,G,j={shouldPersisteData:!0,initialOutput:["Welcome to IOS react-dos-terminal","",""],loadingScreen:{shouldShow:"first-time",messageOrElement:["Installing IOS react-dos-terminal","","Please wait...",""],loadingTime:5e3},terminal:{colors:{background:"#000000",color:"#aaaaaa"},autoFocus:!0,screenStripes:!0},commands:{commands:[],excludeCommands:[],shouldAllowHelp:!0,messages:{toBeImplemented:'Error: "%n" command hasn\'t been implemented.',notFound:'Error: "%n" is not a valid command.',cantBeExecuted:'Error: "%n" can\'t be executed.',helpNotAvailable:'Error: "%n" doesn\'t have any help available.'}},fileSystem:{files:[],actualDir:"",useFakeFileSystem:!0,useInternalFiles:!0}},K=null!==(k=process.env.REACT_APP_NAME)&&void 0!==k?k:"react-dos-terminal",W=function(n,e){var t=window.localStorage.getItem(K),i={};t&&(i=JSON.parse(t)),i[n]=e,window.localStorage.setItem(K,JSON.stringify(i))},q=function(n){var e=window.localStorage.getItem(K),t={};return e&&(t=JSON.parse(e))?t[n]:null},Y=o(void 0),J=function(e){var t=e.children,i=e.config,o={colors:i.colors,screenStripes:i.screenStripes,autoFocus:i.autoFocus,isActive:i.autoFocus},l=r((function(n,e){switch(e.config){case"isActive":return b(b({},n),{isActive:e.value});case"setColors":return W("colors",e.value),b(b({},n),{colors:e.value});default:return n}}),o),c=l[0],u=l[1],s=a((function(){return b(b({},c),{userHasInteracted:function(){u({config:"isActive",value:!0})},setConfig:function(n){"setColors"===n.config&&u({config:"setColors",value:n.value})}})}),[c]);return n(Y.Provider,b({value:s},{children:t}),void 0)},Q=function(){var n=l(Y);if(void 0===n)throw new Error("useTerminal must be used within a TerminalContextProvider.");return n},X=function(n){if("function"==typeof n){var e=n.toString();return 2*JSON.stringify(e).length}return n.reduce((function(n,e){var t=e.toString();return n+2*JSON.stringify(t).length}),0)},$={getFakeFileSize:X,getDir:function(n,e){for(var t=e.split("\\"),i=n,o=0;o<t.length;o+=1)if(""!==t[o]){if(!i.files[t[o]])return null;i=i.files[t[o]].c}return i},getCommandsSize:function(n){return n.reduce((function(n,e){var t=2*(e.alias?e.alias.toString().length:0),i=e.help?e.help.toString().length:0;return e.action?t+=X([e.action])+i+n:n}),0)},fullDirPath:function(n){return"C:\\".concat(n)},formatPrompt:function(n){return"C:\\".concat(n,">")}},Z={run:function(n){var e=n.name,t=n.args,i=n.files,o=n.actualDir;if(!t&&("cd"===e||"chdir"===e))return{};if("cd\\"===e||"chdir\\"===e)return{configTerminal:{config:"setActualDir",value:""}};var r=/\.\./;if(r.test(e)&&""===o)return{output:[{action:"add",value:["Error: You can't move back from root.",""]}]};if(r.test(e)&&""!==o)return{configTerminal:{config:"setActualDir",value:""}};if("\\"===t[0]&&1===t.length)return{configTerminal:{config:"setActualDir",value:""}};if("\\"===t[0]&&t.length>1){var a=t.substring(1);return(l=$.getDir(i,a))?{configTerminal:{config:"setActualDir",value:a}}:{output:[{action:"add",value:["This directory doesn't exists.",""]}]}}if("\\"!==t[0]){a="".concat(o,"\\").concat(t);var l=$.getDir(i,a),c=""===o?t:"".concat(o,"\\").concat(t);return l?{configTerminal:{config:"setActualDir",value:c}}:{output:[{action:"add",value:["This directory doesn't exists.",""]}]}}return{output:[{action:"add",value:["Error: Some strange error has occurred.",""]}]}},help:["CHDIR (change directory) is a command used to switch directories.","","CHDIR [path]   If path directory is available in the current directory, it takes you into path directory.","CHDIR \\[path]  If path directory is available, it would first move back to the root of the drive and then go into the path directory.","CHDIR\\   Goes to the highest level (the root) of the drive.","CHDIR..  Moves back one directory.","","CD [path]   If path directory is available in the current directory, it takes you into path directory.","CD \\[path]  If path directory is available, it would first move back to the root of the drive and then go into the path directory.","CD\\   Goes to the highest level (the root) of the drive.","CD..  Moves back one directory.",""]},nn={run:function(){return{output:[{action:"clear"}]}},help:["Clears the command prompt screen."]},en=["#000000","#0000aa","#00aa00","#00aaaa","#aa0000","#aa00aa","#aa5500","#aaaaaa","#555555","#5555ff","#55ff55","#55ffff","#ff5555","#ff55ff","#ffff55","#ffffff"],tn=["black","blue","green","aqua","red","purple","yellow","white","gray","lightblue","lightgreen","lightaqua","lightred","lightpurple","lightyellow","brightwhite"],on=function(n,e){switch(n){case"name":return"Invalid Color Name Exception: provided color name ".concat(e," is not a valid name\n\r\n\r\n        Valid names are: ").concat(tn.join(", "));case"color":return"Invalid Color Exception: provided color is not valid \n\r\n\r\n        Valid color are: ".concat(en.join(", "));default:return"Invalid Color Exception"}},rn={getHexByColor:function(n){var e=en.indexOf(n);if(-1===e)throw on("color",n);return e.toString(16)},getColorByName:function(n){var e=tn.indexOf(n);if(-1===e)throw on("name",n);return en[e]},getColorByHex:function(n){return en[parseInt(n,16)]},allowedColors:en},an=["The COLOR command is used to configure the terminal colors.","","COLOR [HH]","","Color attributes are specified by TWO hex digits -- the first corresponds to the background; the second the foreground. Digits MUST BE diferent. Each digit can be any of the below values:","","0 = Black       8 = Gray","1 = Blue        9 = Light Blue","2 = Green       A = Light Green","3 = Aqua        B = Light Aqua","4 = Red         C = Light Red","5 = Purple      D = Light Purple","6 = Yellow      E = Light Yellow","7 = White       F = Bright White",""],ln={run:function(n){var e=n.args;return e&&/[0-9A-Fa-f]{2}/g.test(e)&&e[0]!==e[1]?{output:[{action:"add",value:["Colors changed successfully.",""]}],configTerminal:{config:"setColors",value:{background:rn.getColorByHex(e[0]),color:rn.getColorByHex(e[1])}}}:{output:[{action:"add",value:an}]}},help:an},cn=["The DIR command displays information about files and directories, and how much disk space is available.","","DIR [path] [/a[:Attributes]]","","/a:Attributes\t   Displays only files with the specified file attributes. Attributes is a series of letters, each representing an attribute as shown below.","","h: shows hidden files",""],un={run:function(n){var e,t=n.args,i=n.files,o=n.actualDir,r=function(n){var e,t=null!=(e=navigator.userAgent.match(/(MSIE|(?!Gecko.+)Firefox|(?!AppleWebKit.+Chrome.+)Safari|(?!AppleWebKit.+)Chrome|AppleWebKit(?!.+Chrome|.+Safari)|Gecko(?!.+Firefox))(?: |\/)([\d.apre]+)/))?e:"OS";return["","Volume in drive C is ".concat(t[1]),"Volume version is ".concat(t[2]),"","Directory of ".concat($.fullDirPath(n)),"",""]},a=function(n,e,t,i){var o,r=(4194304-n.totalSize).toLocaleString("en-US",{minimumFractionDigits:0});return["","   ".concat(e," File(s)   ").concat(null!==(o=i.toLocaleString("en-US",{minimumFractionDigits:0}))&&void 0!==o?o:0," bytes"),"   ".concat(t," Dir(s)   ").concat(r," bytes free"),"",""]},l=function(n,e,t,o){var l=0,c=0,u=0;if(!t.files)return S(S([],r(e),!0),a(n,l,c,u),!0);var s=Object.keys(t.files).reduce((function(n,e){var i="";return(o||"h"!==t.files[e].a[1])&&("f"===t.files[e].t||"e"===t.files[e].t||"s"===t.files[e].t?(l+=l,u+=t.files[e].s,i="".concat(e).concat(" ".repeat(28-e.length)).concat(t.files[e].s.toLocaleString("en-US",{minimumFractionDigits:0}))):(c+=c,i="".concat(e).concat(" ".repeat(20-e.length),"&ltDIR&gt")),n.push(i)),n}),[]);return!s||v.isEmpty(s)?S(S([],r(e),!0),a(i,l,c,u),!0):S(S(S([],r(e),!0),s,!0),a(i,l,c,u),!0)},c=!1,u=t.match(/\/a:([a-zA-Z]+)/);if(u&&u[1]&&u[1].includes("h"))c=!0;else if(u&&u[1]&&!u[1].includes("h"))return{output:[{action:"add",value:S(["Error: ".concat(u[0]," is not a valid argument."),""],cn,!0)}]};if(""===t||u&&t===u[0]){var s=$.getDir(i,o);if(s)return{output:[{action:"add",value:l(i,o,s,c)}]}}return t.split(" ").forEach((function(n){if(null!==u&&n!==u[0]||!u){var t=n,r="\\"===t[0]?t:o+t,a=$.getDir(i,r);a&&(e=l(i,r,a,c))}})),e?{output:[{action:"add",value:e}]}:{output:[{action:"add",value:["Error: directory does not exist.",""]}]}},help:cn},sn=function(n,e){var t=null==e?void 0:e.replace("%n",n.toLowerCase());return null==t?void 0:t.replace("%N",n.toUpperCase())},dn=function(n){var e=n.name,t=n.messages;return{output:[{action:"add",value:[sn(e,t.helpNotAvailable),""]}]}},fn={commandNotFound:function(n){var e=n.name,t=n.messages;return{output:[{action:"add",value:[sn(e,t.notFound),""]}]}},toBeImplemented:function(n){var e=n.name,t=n.messages;return{output:[{action:"add",value:[sn(e,t.toBeImplemented),""]}]}},cantBeExecuted:function(n){var e=n.name,t=n.messages;return{output:[{action:"add",value:[sn(e,t.cantBeExecuted),""]}]}},helpNotAvailable:dn,link:function(n,e){return'<a href="'.concat(n,'" target="_blank" >').concat(e,"</a>")}},mn=function(n){var e=n.allCommands,t=n.args;if(!t)return{output:[{action:"add",value:S(S(["","HELP","","The HELP command is used to access the help for available commands.","","HELP [command]","","command\tDisplays help information on that command.","","Help is available for those commands:",""],e.reduce((function(n,e){return e.help&&n.push(e.name.toUpperCase()),n}),[]).sort(),!0),[""],!1)}]};var i=e.filter((function(n){return n.name===t||n.alias&&n.alias.includes(t)}));if(i[0]&&i[0].help){var o=void 0;return o="function"==typeof i[0].help?i[0].help():i[0].help,{output:[{action:"add",value:["",t.toUpperCase(),""]},{action:"add",value:o},{action:"add",value:[""]}]}}return dn(b(b({},n),{name:t}))},pn=["____ ____ ____ ____ ___","|__/ |___ |__| |     | ","|  \\ |___ |  | |___  | ","","      ___  ____ ____ ","   __ |  \\ |  | [__  __    ","      |__/ |__| ___]     ","      ","___ ____ ____ _  _ _ _  _ ____ _    "," |  |___ |__/ |\\/| | |\\ | |__| |    "," |  |___ |  \\ |  | | | \\| |  | |___ ","","","This project was made by ".concat(fn.link("https://tpabarbosa.github.io/#/contact","Tatiana Barbosa")," with create-react-app and typescript. It's a simple component to mimic the behavior of a DOS command line interface."),"","","By now only a few commands are available, but much more can be done to improve it. See ".concat(fn.link("https://github.com/tpabarbosa","documentation")," to get more information."),"","",'Thanks to "VileR" from '.concat(fn.link("https://int10h.org/oldschool-pc-fonts","THE OLDSCHOOL PC FONT RESOURCE")," for adapting and providing various oldschool fonts. WebPlus_IBM_VGA_9x16.woff was the chosen font for this project."),""],vn={run:function(){return{output:[{action:"add",value:pn}]}},help:pn},hn={run:function(){return x(void 0,void 0,void 0,(function(){return _(this,(function(n){switch(n.label){case 0:return[4,function(){return x(void 0,void 0,void 0,(function(){return _(this,(function(n){return[2,new Promise((function(n){setTimeout((function(){n(!0)}),3e3)}))]}))}))}().then()];case 1:return n.sent(),[2,{output:[{action:"remove",value:3},{action:"add",value:["","Finished async command",""]}]}]}}))}))},waitingMessage:["Loading...","","Please wait..."]},gn=function(){var n=c(0),e=n[0],t=n[1],i=c(null),o=i[0],r=i[1],a=Q(),l=a.isActive,s=a.autoFocus;return u((function(){l&&o&&o.focus(),!l&&s&&o&&o.focus()}),[o,l,s]),{caretCorrection:e,updateCaretPosition:function(){var n,e,i,r,a=null==o?void 0:o.textContent,l=o?(n=o,r=0,window.getSelection&&(e=window.getSelection())&&e.rangeCount&&(i=e.getRangeAt(0)).commonAncestorContainer.parentNode===n&&(r=i.endOffset),r):0;t(l-a.length),o&&o.focus()},input:o,setPosition:function(n){var e,i,r,a,l=null==o?void 0:o.textContent;o&&(e=o,i=n,r=document.createRange(),a=window.getSelection(),null!==e.firstChild?r.setStart(e.firstChild,i):r.setStart(e,i),r.collapse(!0),a&&(a.removeAllRanges(),a.addRange(r))),t(n-l.length)},setInputRef:function(n){r(n)}}},yn=function(n){var e="background: ".concat(function(n,e){var t="repeating-linear-gradient(6deg, ".concat(e,"e0 1px, ").concat(e," 6px)");return n?t:"".concat(e)}("1"===q("stripes"),null==n?void 0:n.background),";");return n?g(F||(F=D(["\n            ","\n            ","\n        "],["\n            ","\n            ","\n        "])),void 0!==n.color?"color: ".concat(n.color,";"):";",void 0!==n.background?e:";"):";"},wn=g(I||(I=D(["\n    font-family: 'IBM VGA 9x16', monospace !important;\n    font-size: 18px !important;\n    line-height: 18px !important;\n    outline: none;\n    margin: 0;\n    white-space: pre-wrap;\n    word-wrap: break-word;\n"],["\n    font-family: 'IBM VGA 9x16', monospace !important;\n    font-size: 18px !important;\n    line-height: 18px !important;\n    outline: none;\n    margin: 0;\n    white-space: pre-wrap;\n    word-wrap: break-word;\n"]))),bn=y(E||(E=D(["\n    50% {\n        opacity: 1;\n    }\n"],["\n    50% {\n        opacity: 1;\n    }\n"]))),Cn=y(A||(A=D(["\n    50% {\n    border-color: transparent;\n    }\n"],["\n    50% {\n    border-color: transparent;\n    }\n"]))),xn=h.div(T||(T=D(["\n    height: 100%;\n    width: 100%;\n    margin: 0;\n    padding: 0;\n    overflow-x: hidden;\n    overflow-y: auto;\n    text-align: left;\n    padding-bottom: 1px;\n    text-shadow: 7px 0px 20px #808080a8;\n    ",";\n    a {\n        color: ",";\n        background-color: ",";\n    }\n"],["\n    height: 100%;\n    width: 100%;\n    margin: 0;\n    padding: 0;\n    overflow-x: hidden;\n    overflow-y: auto;\n    text-align: left;\n    padding-bottom: 1px;\n    text-shadow: 7px 0px 20px #808080a8;\n    ",";\n    a {\n        color: ",";\n        background-color: ",";\n    }\n"])),(function(n){return yn(n.colors)}),(function(n){return n.colors.background}),(function(n){return n.colors.color})),_n=h.div(P||(P=D(["\n    width: 134%;\n    height: 100%;\n    word-break: break-all;\n    font-family: 'IBM VGA 9x16', monospace !important;\n    font-size: 18px !important;\n    line-height: 18px !important;\n    transform: scaleX(0.75);\n    position: relative;\n    left: -16.7%;\n"],["\n    width: 134%;\n    height: 100%;\n    word-break: break-all;\n    font-family: 'IBM VGA 9x16', monospace !important;\n    font-size: 18px !important;\n    line-height: 18px !important;\n    transform: scaleX(0.75);\n    position: relative;\n    left: -16.7%;\n"]))),Sn=h.div(O||(O=D(["\n    height: ",";\n    /* width: 100%;\n    margin: 0;\n    padding: 0;\n    overflow-x: hidden;\n    overflow-y: auto;\n    text-align: left;\n    padding-bottom: 1px;\n    text-shadow: 7px 0px 20px #808080a8; */\n    ","\n"],["\n    height: ",";\n    /* width: 100%;\n    margin: 0;\n    padding: 0;\n    overflow-x: hidden;\n    overflow-y: auto;\n    text-align: left;\n    padding-bottom: 1px;\n    text-shadow: 7px 0px 20px #808080a8; */\n    ","\n"])),(function(n){return n.fullscreen?"100%":"auto"}),(function(n){return yn(n.colors)})),Dn=h.div(H||(H=D(["\n    /* width: 134%;\n    height: 100%;\n    word-break: break-all;\n    font-family: 'IBM VGA 9x16', monospace !important;\n    font-size: 18px !important;\n    line-height: 18px !important;\n    transform: scaleX(0.75);\n    position: relative;\n    left: -16.7%; */\n"],["\n    /* width: 134%;\n    height: 100%;\n    word-break: break-all;\n    font-family: 'IBM VGA 9x16', monospace !important;\n    font-size: 18px !important;\n    line-height: 18px !important;\n    transform: scaleX(0.75);\n    position: relative;\n    left: -16.7%; */\n"]))),kn=h.div(N||(N=D(["\n    outline: none;\n    margin: 0;\n    ","\n"],["\n    outline: none;\n    margin: 0;\n    ","\n"])),(function(n){return yn(n.colors)})),Fn=h.div(M||(M=D(["\n    padding: 4px 8px 0 8px;\n"],["\n    padding: 4px 8px 0 8px;\n"]))),In=h.div(B||(B=D(["\n    ","\n    ","\n"],["\n    ","\n    ","\n"])),(function(n){return n.flashing?g(R||(R=D(["\n                  animation: "," 1.5s infinite;\n                  opacity: 0;\n              "],["\n                  animation: "," 1.5s infinite;\n                  opacity: 0;\n              "])),bn):""}),(function(n){return yn(n.colors)})),En=h.div(L||(L=D([""],[""]))),An=h.pre(z||(z=D(["\n    ","\n"],["\n    ","\n"])),wn),Tn=h.span(U||(U=D(["\n    padding-left: 8px;\n    outline: none;\n    margin: 0;\n    display: inline-block;\n\n    ","\n\n    pre {\n        display: inline;\n        ","\n    }\n"],["\n    padding-left: 8px;\n    outline: none;\n    margin: 0;\n    display: inline-block;\n\n    ","\n\n    pre {\n        display: inline;\n        ","\n    }\n"])),(function(n){return yn(n.colors)}),wn),Pn=h.div(V||(V=D(["\n    display: inline;\n    outline: none;\n    visibility: visible;\n    caret-color: transparent;\n    outline: none;\n    margin: 0;\n    padding-left: 8px;\n\n    ::selection {\n        color: black;\n        background: gray;\n    }\n"],["\n    display: inline;\n    outline: none;\n    visibility: visible;\n    caret-color: transparent;\n    outline: none;\n    margin: 0;\n    padding-left: 8px;\n\n    ::selection {\n        color: black;\n        background: gray;\n    }\n"]))),On=h.span(G||(G=D(["\n    border-bottom: 2px solid;\n    animation: "," 1s step-end infinite;\n    position: relative;\n    top: -3px;\n    display: inline-block;\n    line-height: 16px;\n    left: ","ch;\n    ","\n"],["\n    border-bottom: 2px solid;\n    animation: "," 1s step-end infinite;\n    position: relative;\n    top: -3px;\n    display: inline-block;\n    line-height: 16px;\n    left: ","ch;\n    ","\n"])),Cn,(function(n){return n.positionCorrection}),(function(n){return yn(n.colors)})),Hn=function(e){var t=e.correction,i=e.colors;return n(On,b({positionCorrection:t,colors:i},{children:"Â "}),void 0)},Nn=s((function(t,i){var o=t.onClick,r=t.onInput,a=t.onKeyDown,l=t.onKeyPress,s=t.onKeyUp,d=t.id,f=t.prompt,m=void 0===f?"":f,p=t.colors,v=t.caretColors,h=C(t,["onClick","onInput","onKeyDown","onKeyPress","onKeyUp","id","prompt","colors","caretColors"]),g=c(!1),y=g[0],w=g[1],x=gn();u((function(){if(!y){var n=document.getElementById(d);n&&x.setInputRef(n),w((function(n){return!n}))}}),[y,d,x]);return e(Tn,b({},h,{colors:p},{children:[n("pre",{children:m},void 0),n(Pn,{ref:i,id:d,contentEditable:"true",onClick:function(n){o&&o(n),x.updateCaretPosition()},onInput:function(n){r&&r(n),x.updateCaretPosition()},onKeyUp:function(n){s&&s(n),x.updateCaretPosition()},onKeyDown:function(n){a&&a(n),x.updateCaretPosition()},onKeyPress:function(n){l&&l(n),x.updateCaretPosition()},autoCorrect:"off",autoCapitalize:"none",spellCheck:!1,inputMode:"text"},void 0),n(Hn,{correction:x.caretCorrection,colors:v},void 0)]}),void 0)})),Mn=function(e){var t=e.children,i=e.colors,o=C(e,["children","colors"]);return n(kn,b({colors:i},o,{children:n(Fn,{children:t},void 0)}),void 0)},Rn=function(i){var o=i.output,r=i.typewriter,a=i.flashing,l=void 0!==a&&a,s=i.colors,m=C(i,["output","typewriter","flashing","colors"]),p=d(null),h=c([]),g=h[0],y=h[1],w=d(null),S=f((function(n,e){return x(void 0,void 0,void 0,(function(){var t;return _(this,(function(i){switch(i.label){case 0:return t=e,[4,new Promise((function(i){var o,a=n?n.split(""):[];o=setInterval((function(){var n,r;a.length>0&&(e.textContent?t.textContent+=null!==(n=a.shift())&&void 0!==n?n:"":t.textContent=null!==(r=a.shift())&&void 0!==r?r:""),0===a.length&&(clearInterval(o),i(!0))}),r.typeInterval),n||(clearInterval(o),i(!0))}))];case 1:return[2,i.sent()]}}))}))}),[r]);return u((function(){p.current&&r.isTypewriting&&!v.isEqual(o,g)&&o.length>0&&(!function(n){x(void 0,void 0,void 0,(function(){var e,t,i,o,a,l;return _(this,(function(c){switch(c.label){case 0:for(e=n,t=[],i=0;i<n.length;i+=1)t.push(null!==(l=n[i].children[0].textContent)&&void 0!==l?l:""),e[i].children[0].textContent="";o=0,c.label=1;case 1:return o<n.length?(a=n[o].children[0],[4,S(t[o],a).then()]):[3,4];case 2:c.sent(),w.current&&w.current.scrollIntoView({block:"end"}),o===n.length-1&&r.isTypewriting&&r.endTypewriting(),c.label=3;case 3:return o+=1,[3,1];case 4:return[2]}}))}))}(p.current.children),y(o));r.isTypewriting||0===g.length||y([])}),[g,S,o,p,r]),e(t,{children:[e(In,b({},m,{colors:s,flashing:l,ref:p},{children:["object"==typeof o&&o.length>0&&o.map((function(e,t){return n(En,{children:""!==e?n(An,{dangerouslySetInnerHTML:{__html:e}},void 0):n("br",{},void 0)},"".concat(t,"|").concat(e))})),"string"==typeof o&&o.length>0&&n(En,{children:""!==o?n(An,{dangerouslySetInnerHTML:{__html:o}},void 0):n("br",{},void 0)},void 0)]}),void 0),n("div",{ref:w},void 0)]},void 0)};Mn.Typewriter=function(i){var o=i.output,r=i.flashing,a=void 0!==r&&r,l=i.colors,c=C(i,["output","flashing","colors"]);return e(t,{children:[n(Mn.Print,b({output:o.outputHistory},c,{colors:l,flashing:a}),void 0),n(Rn,b({typewriter:o.typewriter,output:o.lastOutput},c,{colors:l,flashing:a}),void 0)]},void 0)},Mn.Print=function(i){var o=i.output,r=i.flashing,a=void 0!==r&&r,l=i.colors,c=C(i,["output","flashing","colors"]),s=d(null),f=d(null);return u((function(){f.current&&f.current.scrollIntoView({block:"end"})})),e(t,{children:[e(In,b({},c,{colors:l,flashing:a,ref:s},{children:["object"==typeof o&&o.length>0&&o.map((function(e,t){return n(En,{children:""!==e?n(An,{dangerouslySetInnerHTML:{__html:e}},void 0):n("br",{},void 0)},"".concat(t,"|").concat(e))})),"string"==typeof o&&o.length>0&&n(En,{children:""!==o?n(An,{dangerouslySetInnerHTML:{__html:o}},void 0):n("br",{},void 0)},void 0)]}),void 0),n("div",{ref:f},void 0)]},void 0)};var Bn,Ln=o(void 0),zn=function(e){var t=e.children,i=e.config,o={allCommands:i.commands,shouldAllowHelp:i.shouldAllowHelp,actualCmd:null,isRunningCommand:!1,messages:i.messages},l=r((function(n,e){switch(e.type){case"isRunningCommand":return b(b({},n),{isRunningCommand:e.value});case"setActualCmd":return b(b({},n),{actualCmd:e.value});default:return n}}),o),c=l[0],u=l[1],s=a((function(){return b(b({},c),{startRunningCommand:function(){u({type:"isRunningCommand",value:!0})},endRunningCommand:function(){u({type:"isRunningCommand",value:!1})},setActualCmd:function(n){u({type:"setActualCmd",value:n})}})}),[c]);return n(Ln.Provider,b({value:s},{children:t}),void 0)},Un=function(){var n=l(Ln);if(void 0===n)throw new Error("useCommand must be used within a CommandContextProvider.");return n},Vn=function(){var n=m();return{ref:n,getText:function(){var e="";return n.current&&(e=n.current.textContent?n.current.textContent:""),e.trim()},setText:function(e){n.current&&(n.current.textContent=e)},setFocus:function(){n.current&&n.current.focus()}}},Gn=function(t){var i=t.children,o=t.colors,r=t.stripes,a=t.fullscreen,l=void 0!==a&&a,c=C(t,["children","colors","stripes","fullscreen"]),s=Q(),f=d(null);return u((function(){f.current&&f.current.scrollIntoView({block:"end"})})),n(Sn,b({},c,{colors:null!=o?o:s.colors,stripes:null!=r?r:s.screenStripes,fullscreen:l},{children:e(Dn,{children:[i,n("div",{ref:f},void 0)]},void 0)}),void 0)},jn=function(t){var i=t.name,o=t.args,r=t.outputHandler,a=Un(),l=Vn(),u=c(""),s=u[0],d=u[1],f={background:rn.getColorByName("red"),color:rn.getColorByName("brightwhite")};return e(Gn,b({colors:f,fullscreen:!("with-output"!==o||!a.isRunningCommand)},{children:["with-output"===o&&a.isRunningCommand&&n(Mn,b({style:{height:"95%"}},{children:n(Mn.Print,{output:["just testing... Type your name: ".concat(s," ")]},void 0)}),void 0),n(Nn,{onInput:function(){d(l.getText())},onKeyDown:function(n){return function(n){if("Enter"===n.key){n.preventDefault();var e=l.getText(),t=["","Hello, ".concat(""===e?"Unkown Person":e,"!"),"","Finishing command ".concat(i," ").concat(o,"..."),""];if(r){var c="with-output"===o?2:4;r.addToQueue(["with-output"===o?{action:"clear"}:{action:"remove",value:c},{action:"add",value:t}])}a.endRunningCommand()}}(n)},id:"dynamic_input",ref:l.ref,prompt:">>>"},void 0)]}),void 0)},Kn=["The TYPE command displays the contents of a text file. However, it does not allow you to edit the file, or add new text.","","The TYPE command has no options.","","TYPE [filename]","","Filename is the name of the file to show.",""],Wn={run:function(n){var e=n.args,t=n.actualDir,i=n.files;if(!e)return{output:[{action:"add",value:S(["Error: TYPE command requires an argument.",""],Kn,!0)}]};var o=$.getDir(i,t),r=!!(null==o?void 0:o.files[e])&&(null==o?void 0:o.files[e]);return r?"f"!==r.t?{output:[{action:"add",value:["","MZÃ‰â™¥â™¦  Â©@Ã“â™«â–¼â•‘â™«â”¤ â•!Â©â˜ºLâ•!.",'$â™£Â·âˆŸAÃ¸rÃAÃ¸rÃAÃ¸rÃUÂ­wÃ½@Ã¸rÃUÂ­qÃ½CÃ¸rÃUÂ­vÃ½PÃ¸rÃAÃ¸sÃbÃ¸rÃUÂ­sÃ½FÃ¸rÃUÂ­zÃ½CÃ¸rÃUÂ­Ã¬Ã@Ã¸rÃUÂ­pÃ½@Ã¸rÃRichAÃ¸rÃPEdÃ¥â™ MÃ(Â­"â™‚â˜»â™«Â¶$0Â¶â–º@â˜ºâ–ºâ˜»',"","","@â• ' â””\"Tâ–º â†‘â˜º(!â–ºâ˜º.textÃ“   â–º","â™¦ '.rdataâ• ","â™«@@.dataxâ™ 0â˜»â†‘@â””.pdataâ• @â˜»,","",""]}]}:"string"==typeof r.c?{output:[{action:"add",value:["",r.c,""]}]}:{output:[{action:"add",value:S(S([""],r.c,!0),[""],!1)}]}:{output:[{action:"add",value:["File ".concat(e," doesn't exists."),""]}]}},help:Kn},qn=["The VER command displays the version of react-dos-terminal."],Yn={run:function(n){if(""!==n.args)return{output:[{action:"add",value:S(["Error: VER command doesn't have arguments.",""],qn,!0)}]};return{output:[{action:"add",value:["","react-dos-terminal version: ".concat("0.1.3 - February 9, 2022 17:49:22"),""]}]}},help:qn},Jn=[{name:"test-static",alias:["static"],action:function(n){var e=n.name,t=n.args;return{output:[{action:"add",value:["Testing command: ".concat(e),"",t?"Error: this command doesn't have arguments.":"",""]}]}}},{name:"test-dynamic",alias:["dynamic"],action:function(e){var t=e.name,i=e.args,o=["Now running command: ".concat(t,"."),"","Please enter your name:"];return"with-output"!==i&&o.push("Error: Unknown argument ".concat(i)),o.push(""),{output:[{action:"add",value:"with-output"===i?"":o}],dynamic:{element:n(jn,{name:t,args:i},void 0),options:{shouldHideTerminalOutput:"with-output"===i}}}}},{name:"test-async",alias:["async"],action:hn.run,async:{waitingMessage:hn.waitingMessage}},{name:"cls",alias:["clear"],action:nn.run,help:nn.help},{name:"ver",action:Yn.run,help:Yn.help},{name:"color",action:ln.run,help:ln.help},{name:"ðŸ˜Ž",action:function(){return{output:[{action:"add",value:["","Oh, no!!!","","You found my secret code!!!","","ðŸ˜±ðŸ˜±ðŸ˜±ðŸ˜±ðŸ˜±ðŸ˜±","",""]}]}}}],Qn=[{name:"react-dos-terminal",action:vn.run}],Xn=[{name:"type",action:Wn.run,help:Wn.help},{name:"dir",alias:["ls"],action:un.run,help:un.help},{name:"cd",alias:["cd..","cd\\","chdir","chdir..","chdir\\"],action:Z.run,help:Z.help},{name:"edit",action:fn.toBeImplemented}],$n=[{name:"help",alias:["/?"],action:mn}],Zn=function(n){var e=0,t=n.reduce((function(n,t){var i,o,r,a={},l="";"directory"===t.type?a=Zn(t.content):l=("file"===t.type&&"string"==typeof t.content||"file"===t.type&&t.content,t.content),r="directory"===t.type?"d":"file"===t.type?"f":"exec-file"===t.type?"e":"s";var c={c:"directory"===t.type?a:l,a:t.attributes,t:r},u=null!==(o=t.fakeFileSize)&&void 0!==o?o:0,s=function(n,e){var t,i=2*(n.length+3);if("e"===e.t||"s"===e.t){var o=e.c;i+=$.getCommandsSize([o])}else"f"===e.t?i+=2*JSON.stringify(e.c).length:i+=null!==(t=e.c.totalSize)&&void 0!==t?t:0;return i}(t.name,c)+u;return e+=s,n.files=b(b({},n.files),((i={})[t.name]=b(b({},c),{s:s}),i)),n.totalSize=e,n}),{});return t},ne=function(n,e){var t=S([],n,!0);return e.forEach((function(e){if("file"===e.type||"exec-file"===e.type||"system-file"===e.type)if(n.filter((function(n){return n.name===e.name}))[0]){var i=e.name.match(/(.+?)(\.[^.]*$|$)/);i&&i[1]&&i[2]&&t.push({name:"".concat(i[1],"(1)").concat(i[2]),type:e.type,attributes:e.attributes,content:e.content})}else t.push(e)})),t},ee=function(n,e){return"s"===n.attributes[0]||"s"===e.attributes[0]?"s":"r"===n.attributes[0]||"r"===e.attributes[0]?"r":"w"},te=function(n,e){return"h"===n.attributes[1]||"h"===e.attributes[1]?"h":""},ie=function(n,e){var t=n.filter((function(n){return"directory"===n.type})),i=[];return t.forEach((function(n){var t=e.filter((function(e){return"directory"===e.type&&e.name===n.name}));if(t[0]){var o=function(n,e){var t=n.content,i=e.content;return{name:n.name,type:"directory",content:ie(t,i),attributes:ee(n,e)+te(n,e)}}(n,t[0]),r=n.content,a=t[0].content,l=ne(r,a);o.content=S([],l,!0),i.push(o)}})),i},oe={createFakeFileSystem:function(n,e){if(!n)return{files:{},totalSize:0};if(!e)return Zn(n);var t=ie(n,e),i=ne(n,e),o=Zn(n),r=Zn(e),a=Zn(i),l=Zn(t),c=b(b(b(b({},o.files),r.files),a.files),l.files);return{files:c,totalSize:Object.values(c).reduce((function(n,e){return n+e.s}),0)}},createCommands:function(n,e){if(!e)return n;var t=n.reduce((function(n,t){var i=e.filter((function(n){return t.name===n.name}));return i.length>0?n.push(b(b({},t),i[0])):n.push(t),n}),[]),i=e.reduce((function(n,e){return t.filter((function(n){return v.isEqual(e.name,n.name)}))[0]||n.push(e),n}),[]);return S(S([],t,!0),i,!0)},excludeCommands:function(n,e){return e&&0!==e.length?"all"===e?[]:n.filter((function(n){return!e.includes(n.name)})):n}},re=function(n){var e=n.input,t=gn();u((function(){e.current&&t.setInputRef(e.current)}),[e,t]);var i=c([]),o=i[0],r=i[1],a=c(o.length),l=a[0],s=a[1];return{add:function(n){""!==n.trim()&&n.trim()!==o[o.length-1]?(r(S(S([],o,!0),[n.trim()],!1)),s(o.length+1)):s(o.length)},up:function(){var n;if(0===l)return t.input.textContent=o[0],t.setPosition(0),o[0];var e=null!==(n=o[l-1])&&void 0!==n?n:"";return t.input.textContent=e,t.setPosition(e.length),s((function(n){return n-1})),e},down:function(){var n;if(l===o.length)return t.input.textContent="",t.setPosition(0),"";var e=null!==(n=o[l+1])&&void 0!==n?n:"";return t.input.textContent=e,t.setPosition(e.length),s((function(n){return n+1})),e},length:l}},ae=function(n){var e=c([{action:"add",value:n}]),t=e[0],i=e[1],o=c([]),r=o[0],a=o[1],l=c([]),s=l[0],d=l[1],m=c(!1),p=m[0],v=m[1],h=c(10),g=h[0],y=h[1],w=f((function(n){var e=S([],r,!0);e.splice(0-n),a(e)}),[r]),b=function(){v(!0)},C=function(n){d(n)};return u((function(){if(t.length>0&&!p){switch(t[0].action){case"add":b(),"string"==typeof t[0].value?C([t[0].value]):C(t[0].value);break;case"remove":w(t[0].value);break;case"clear":a([])}var n=S([],t,!0);n.shift(),i(n)}}),[t,p,w]),{outputHistory:r,addToHistory:function(n){a("string"==typeof n?function(e){return S(S([],e,!0),[n],!1)}:function(e){return S(S([],e,!0),n,!0)})},removeFromHistory:w,outputQueue:t,addToQueue:function(n){i((function(e){return S(S([],e,!0),n,!0)}))},lastOutput:s,typewriter:{isTypewriting:p,startTypewriting:b,endTypewriting:function(){a((function(n){return S(S([],n,!0),s,!0)})),d([]),v(!1)},typeInterval:g,changeTypeInterval:function(n){y(n)}}}},le=function(t){var i=t.children,o=t.colors,r=t.stripes,a=C(t,["children","colors","stripes"]),l=Q(),c=d(null);return u((function(){c.current&&c.current.scrollIntoView({block:"end"})})),n(xn,b({colors:null!=o?o:l.colors,stripes:null!=r?r:l.screenStripes},{children:e(_n,b({},a,{children:[i,n("div",{ref:c},void 0)]}),void 0)}),void 0)},ce=o(void 0),ue=function(e){var t=e.children,i=e.config,o={actualDir:i.actualDir,allFiles:i.allFiles},l=r((function(n,e){switch(e.type){case"setActualDir":return W("actualDir",e.value),b(b({},n),{actualDir:e.value});case"setFiles":return b(b({},n),{allFiles:e.value});default:return n}}),o),c=l[0],u=l[1],s=a((function(){return b(b({},c),{setFiles:function(n){u({type:"setFiles",value:n})},setActualDir:function(n){u({type:"setActualDir",value:n})}})}),[c]);return n(ce.Provider,b({value:s},{children:t}),void 0)},se=function(){var n=l(ce);if(void 0===n)throw new Error("useFileSystem must be used within a FileSystemContextProvider.");return n},de=function(n){var e=n.action,t=n.outputHandler,i=Q(),o=se(),r=Un(),a=r.messages,l=r.shouldAllowHelp,c=r.allCommands,u=o.actualDir,s=o.allFiles;return{run:function(n){return x(void 0,void 0,void 0,(function(){var d,f,m,p,h,g,y,w,C,S,D,k;return _(this,(function(F){if(d=function(n){var e=n.indexOf(" "),t="",i="",o=!1;if(-1!==e?(t=n.substring(0,e).trim(),i=n.substring(e+1).trim()):t=n.trim(),l){var r=/\/\?/;r.test(t)&&"/?"!==t?(o=!0,t=t.substring(0,t.length-2)):"/?"===i?o=!0:r.test(t)||"/?"!==t||(o=!0)}return{name:t,args:i,isHelp:o}},f=d(n),m=f.name,p=f.args,h=f.isHelp,t.addToHistory("".concat($.formatPrompt(u)," ").concat(n)),""===m)return r.setActualCmd(null),[2];if(g={name:m,args:p,allCommands:c,messages:a,actualDir:u,files:s},y=function(n,a){r.setActualCmd(b({name:m,args:p,waitingMessage:a},n)),void 0!==n.configTerminal&&("setColors"===n.configTerminal.config&&i.setConfig(n.configTerminal),"setActualDir"===n.configTerminal.config&&o.setActualDir(n.configTerminal.value)),n.output&&t.addToQueue(n.output),a||r.startRunningCommand(),n.dynamic?e("NEW_CMD","dynamic"):e("NEW_CMD","static")},w=function(n){return x(void 0,void 0,void 0,(function(){var i,o,r;return _(this,(function(a){switch(a.label){case 0:return(i=null===(r=null==n?void 0:n.async)||void 0===r?void 0:r.waitingMessage)&&(t.addToQueue([{action:"add",value:i}]),e("NEW_CMD","async")),n.action?[4,n.action(g)]:[3,2];case 1:return o=a.sent(),y(o,i),[2];case 2:return y(fn.commandNotFound(g)),[2]}}))}))},C=function(n){n.help?y(mn(b(b({},g),{name:"help",args:m}))):y(fn.helpNotAvailable(g))},S=function(n){if(v.isEmpty(n.files))return null;var e=[u,"","\\system"].reduce((function(e,t){if(v.isEmpty(e)){var i=$.getDir(s,t);if(i&&i.files){if(i.files[n.name]&&("e"===i.files[n.name].t||"s"===i.files[n.name].t))return i.files[n.name].c;if(i.files["".concat(n.name,".com")]&&("e"===i.files["".concat(n.name,".com")].t||"s"===i.files["".concat(n.name,".com")].t))return i.files["".concat(n.name,".com")].c;if(i.files["".concat(g.name,".exe")]&&("e"===i.files["".concat(g.name,".exe")].t||"s"===i.files["".concat(g.name,".exe")].t))return i.files["".concat(g.name,".exe")].c}}return e}),{});return v.isEmpty(e)?null:e},D=c.filter((function(n){var e;return n.name.toLowerCase()===m.toLowerCase()||(null===(e=n.alias)||void 0===e?void 0:e.find((function(n){return n.toLowerCase().includes(m.toLowerCase())})))})),D[0]){if(h)return C(D[0]),[2];w(D[0])}else if(k=S(g)){if(h)return C(D[0]),[2];w(k)}else y(fn.commandNotFound(g));return[2]}))}))}}},fe=function(n){var e=c(n.initialState),t=e[0],i=e[1],o=f((function(e,o){var r=n.states[t].actions[e];if(!r)throw new Error('Invalid action "'.concat(e,'" for state "').concat(t,'"'));r.newState&&i(r.newState),r.onTransition&&r.onTransition(o)}),[t]);return u((function(){n.initialEffect&&n.initialEffect()}),[]),u((function(){n.machineEffect&&n.machineEffect()}),n.machineEffectDependencies),u((function(){var e=n.states[t].effect;e&&e()}),n.statesEffectDependencies?S(S([],n.statesEffectDependencies,!0),[t,n.states],!1):[t,n.states]),[t,o]},me=function(n){var e=n.outputHandler,t=Un(),i=t.isRunningCommand,o=t.endRunningCommand,r=t.setActualCmd,a=e.outputQueue,l=e.typewriter.isTypewriting,u=c(""),s=u[0],d=u[1],f=function(){o(),r(null),d(""),v("FINISH_CMD")},m=fe({initialState:"IDDLE",statesEffectDependencies:[i,l,a,s],states:{IDDLE:{actions:{NEW_CMD:{newState:"RUNNING_COMMAND",onTransition:function(n){d(n)}}}},RUNNING_COMMAND:{effect:function(){i||"dynamic"!==s?i&&0===a.length&&!l&&"dynamic"!==s&&""!==s&&f():f()},actions:{FINISH_CMD:{newState:"IDDLE"}}}}}),p=m[0],v=m[1];return{state:p,action:v}},pe=function(n){var e=n.element,t=n.outputHandler;return p(e.type,b(b({},e.props),{outputHandler:t}),null)},ve=function(t){var i,o=t.initialOutput,r=c(!1),a=r[0],l=r[1],s=Q(),d=se().actualDir,f=null===(i=Un().actualCmd)||void 0===i?void 0:i.dynamic,m=Vn(),p=re({input:m.ref}),v=ae(o),h=me({outputHandler:v}),g=h.state,y=h.action,w=de({state:g,action:y,outputHandler:v});return u((function(){var n;"RUNNING_COMMAND"===g&&(null===(n=null==f?void 0:f.options)||void 0===n?void 0:n.shouldHideTerminalOutput)&&l(!0),"RUNNING_COMMAND"!==g&&l(!1)}),[g,f]),e(le,b({onClick:function(){return m&&m.setFocus()}},{children:[!a&&n(Mn,{children:n(Mn.Typewriter,{output:v},void 0)},void 0),"RUNNING_COMMAND"===g&&f&&n(pe,{element:null==f?void 0:f.element,outputHandler:v},void 0),"RUNNING_COMMAND"!==g&&!v.typewriter.isTypewriting&&n(Nn,{onKeyUp:function(n){switch(s.isActive||s.userHasInteracted(),n.key){case"ArrowUp":return n.preventDefault(),void p.up();case"ArrowDown":return n.preventDefault(),void p.down();case"Enter":var e=m.getText();n.preventDefault(),w.run(e),m.setText(""),p.add(e)}},id:"terminal_input",ref:m.ref,prompt:$.formatPrompt(d)},void 0)]}),void 0)},he=function(n){var e=q("i"),t=a((function(){return b(b({},j.loadingScreen),n)}),[n]),i=c(!1),o=i[0],r=i[1];return u((function(){!o&&function(n,e){var t;switch(null!==(t=n.shouldShow)&&void 0!==t?t:"first-time"){case"always":return!0;case"never":return!1;default:return"1"!==e}}(t,e)&&(r(!0),setTimeout((function(){r(!1)}),t.loadingTime))}),[]),{isLoading:o,content:t.messageOrElement}},ge=[{name:"readme.txt",type:"file",content:vn.help,attributes:"s"},{name:"system",type:"directory",attributes:"s",content:[{name:"doskey.exe",type:"system-file",attributes:"sh",content:{name:"doskey",action:fn.cantBeExecuted},fakeFileSize:$.getFakeFileSize([re,gn])},{name:"help.com",type:"exec-file",attributes:"s",content:{name:"help",action:mn},fakeFileSize:$.getFakeFileSize(mn)}]},{name:"command.com",type:"system-file",attributes:"sh",content:{name:"command",action:fn.cantBeExecuted},fakeFileSize:$.getCommandsSize(Jn)+$.getFakeFileSize([de,gn,me,zn,Gn])},{name:"io.sys",type:"system-file",attributes:"sh",content:{name:"io",action:fn.cantBeExecuted},fakeFileSize:$.getFakeFileSize([ve,le,J,he,oe.createCommands,fe])},{name:"msdos.sys",type:"system-file",attributes:"sh",content:{name:"msdos",action:fn.cantBeExecuted},fakeFileSize:$.getFakeFileSize([se,ue,function(){return $},oe.createFakeFileSystem,Nn,Mn,pe,Vn,ae])}],ye=function(n){var e,t,i,o,r,l,s,d,f,m,p,v,h=q("i"),g=c(!1),y=g[0],w=g[1],C=void 0!==(null==n?void 0:n.shouldPersisteData)?n.shouldPersisteData:j.shouldPersisteData,x=c(j.terminal.colors),_=x[0],S=x[1],D=void 0!==(null===(e=null==n?void 0:n.terminal)||void 0===e?void 0:e.screenStripes)?null===(t=null==n?void 0:n.terminal)||void 0===t?void 0:t.screenStripes:j.terminal.screenStripes,k=c(j.fileSystem.actualDir),F=k[0],I=k[1],E=void 0!==(null===(i=null==n?void 0:n.terminal)||void 0===i?void 0:i.autoFocus)?n.terminal.autoFocus:j.terminal.autoFocus,A=b(b({},j.commands.messages),null===(o=null==n?void 0:n.commands)||void 0===o?void 0:o.messages),T=void 0!==(null===(r=null==n?void 0:n.commands)||void 0===r?void 0:r.excludeCommands)?n.commands.excludeCommands:j.commands.excludeCommands,P=void 0!==(null===(l=null==n?void 0:n.commands)||void 0===l?void 0:l.shouldAllowHelp)?n.commands.shouldAllowHelp:j.commands.shouldAllowHelp,O=a((function(){var e,t,i,o,r,a;if(!1!==(null===(e=null==n?void 0:n.fileSystem)||void 0===e?void 0:e.useFakeFileSystem)){var l=Jn.concat(Xn);a=oe.createCommands(l,null===(t=null==n?void 0:n.commands)||void 0===t?void 0:t.commands)}else{l=Jn.concat($n);a=oe.createCommands(l,null===(i=null==n?void 0:n.commands)||void 0===i?void 0:i.commands)}return!1===(null===(o=null==n?void 0:n.fileSystem)||void 0===o?void 0:o.useInternalFiles)&&(a=oe.createCommands(a,$n)),P||(a=oe.excludeCommands(a,["help"])),a=oe.createCommands(a,null===(r=null==n?void 0:n.commands)||void 0===r?void 0:r.commands),oe.createCommands(a,Qn)}),[null===(s=null==n?void 0:n.commands)||void 0===s?void 0:s.commands,null===(d=null==n?void 0:n.fileSystem)||void 0===d?void 0:d.useFakeFileSystem,null===(f=null==n?void 0:n.fileSystem)||void 0===f?void 0:f.useInternalFiles,P]),H=a((function(){var e,t,i;return!1!==(null===(e=null==n?void 0:n.fileSystem)||void 0===e?void 0:e.useFakeFileSystem)&&!1!==(null===(t=null==n?void 0:n.fileSystem)||void 0===t?void 0:t.useInternalFiles)?oe.createFakeFileSystem(ge,null===(i=null==n?void 0:n.fileSystem)||void 0===i?void 0:i.files):!1!==(null==n?void 0:n.fileSystem.useFakeFileSystem)&&!1===(null==n?void 0:n.fileSystem.useInternalFiles)&&n.fileSystem.files?oe.createFakeFileSystem(n.fileSystem.files):oe.createFakeFileSystem()}),[n]);return u((function(){var e,t,i,o,r,a;null!==h&&"0"!==h&&C?(r=q("colors"),a=q("actualDir")):(r=(null===(e=null==n?void 0:n.terminal)||void 0===e?void 0:e.colors)?null===(t=null==n?void 0:n.terminal)||void 0===t?void 0:t.colors:j.terminal.colors,a=void 0!==(null===(i=null==n?void 0:n.fileSystem)||void 0===i?void 0:i.actualDir)?null===(o=null==n?void 0:n.fileSystem)||void 0===o?void 0:o.actualDir:j.fileSystem.actualDir,r&&W("colors",r),W("i","1"),W("actualDir",a)),W("stripes",D?"1":"0"),S(r),I(a),w(!0)}),[null===(m=null==n?void 0:n.fileSystem)||void 0===m?void 0:m.actualDir,null===(p=null==n?void 0:n.terminal)||void 0===p?void 0:p.colors,null===(v=null==n?void 0:n.terminal)||void 0===v?void 0:v.screenStripes,h,C,D]),{terminal:{colors:_,screenStripes:D,autoFocus:E},commands:{commands:O,shouldAllowHelp:P,excludeCommands:T,messages:A},isInitialized:y,fileSystem:{actualDir:F,allFiles:H}}},we=require("../assets/WebPlus_IBM_VGA_9x16.woff"),be=w(Bn||(Bn=D(["\n    @font-face {\n        font-family: 'IBM VGA 9x16';\n        src: url(",") format('woff');\n        font-weight: normal;\n        font-style: normal;\n    }\n"],["\n    @font-face {\n        font-family: 'IBM VGA 9x16';\n        src: url(",") format('woff');\n        font-weight: normal;\n        font-style: normal;\n    }\n"])),we),Ce=function(o){var r=o.content,a=ae(i.isValidElement(r)?[]:"string"==typeof r?[r]:r);return e(t,{children:[!i.isValidElement(r)&&n(le,{children:n(Mn,{children:n(Mn.Typewriter,{output:a,flashing:!0},void 0)},void 0)},void 0),i.isValidElement(r)&&n(pe,{element:r,outputHandler:a},void 0)]},void 0)},xe=function(o){var r=o.config,a=ye(r),l=he(null==r?void 0:r.loadingScreen),c=void 0!==(null==r?void 0:r.initialOutput)?r.initialOutput:j.initialOutput;return n(i.StrictMode,{children:a.isInitialized&&e(t,{children:[n(be,{},void 0),e(J,b({config:a.terminal},{children:[!l.isLoading&&n(ue,b({config:a.fileSystem},{children:n(zn,b({config:a.commands},{children:n(ve,{initialOutput:c},void 0)}),void 0)}),void 0),l.isLoading&&n(Ce,{content:l.content},void 0)]}),void 0)]},void 0)},void 0)};export{Gn as CommandScreen,Nn as Input,Mn as Output,xe as Terminal,rn as colorsHelper,$ as fileSystemHelper,Un as useCommand,Vn as useInput,fe as useStateMachine};
