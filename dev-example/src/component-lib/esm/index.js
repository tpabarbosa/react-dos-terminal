/* Version: 0.1.0 - February 8, 2022 18:13:01 */
/* eslint-disable */import{jsx as n,jsxs as t,Fragment as e}from"react/jsx-runtime";import o,{createContext as i,useMemo as r,useReducer as a,useContext as l,useState as c,useEffect as u,forwardRef as s,useRef as d,useCallback as f,createRef as m,createElement as p}from"react";import v from"lodash";import h,{css as g,keyframes as y,createGlobalStyle as w}from"styled-components";
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var b=function(){return b=Object.assign||function(n){for(var t,e=1,o=arguments.length;e<o;e++)for(var i in t=arguments[e])Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i]);return n},b.apply(this,arguments)};function C(n,t){var e={};for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&t.indexOf(o)<0&&(e[o]=n[o]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(o=Object.getOwnPropertySymbols(n);i<o.length;i++)t.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(n,o[i])&&(e[o[i]]=n[o[i]])}return e}function x(n,t,e,o){return new(e||(e=Promise))((function(i,r){function a(n){try{c(o.next(n))}catch(n){r(n)}}function l(n){try{c(o.throw(n))}catch(n){r(n)}}function c(n){var t;n.done?i(n.value):(t=n.value,t instanceof e?t:new e((function(n){n(t)}))).then(a,l)}c((o=o.apply(n,t||[])).next())}))}function _(n,t){var e,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function l(r){return function(l){return function(r){if(e)throw new TypeError("Generator is already executing.");for(;a;)try{if(e=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(n,a)}catch(n){r=[6,n],o=0}finally{e=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,l])}}}function S(n,t,e){if(e||2===arguments.length)for(var o,i=0,r=t.length;i<r;i++)!o&&i in t||(o||(o=Array.prototype.slice.call(t,0,i)),o[i]=t[i]);return n.concat(o||Array.prototype.slice.call(t))}function k(n,t){return Object.defineProperty?Object.defineProperty(n,"raw",{value:t}):n.raw=t,n}var D,I,E,F,T,A,P,O,H,N,M,R,B,L,z,U,V,G,j={shouldPersisteData:!0,initialOutput:["Welcome to IOS react-dos-terminal","",""],loadingScreen:{shouldShow:"first-time",messageOrElement:["Installing IOS react-dos-terminal","","Please wait...",""],loadingTime:5e3},terminal:{colors:{background:"#000000",color:"#aaaaaa"},autoFocus:!0,screenStripes:!0},commands:{commands:[],excludeCommands:[],shouldAllowHelp:!0,messages:{toBeImplemented:'Error: "%n" command hasn\'t been implemented.',notFound:'Error: "%n" is not a valid command.',cantBeExecuted:'Error: "%n" can\'t be executed.',helpNotAvailable:'Error: "%n" doesn\'t have any help available.'}},fileSystem:{files:[],actualDir:"",useFakeFileSystem:!0,useInternalFiles:!0}},K=null!==(D=process.env.REACT_APP_NAME)&&void 0!==D?D:"react-dos-terminal",W=function(n,t){var e=window.localStorage.getItem(K),o={};e&&(o=JSON.parse(e)),o[n]=t,window.localStorage.setItem(K,JSON.stringify(o))},q=function(n){var t=window.localStorage.getItem(K),e={};return t&&(e=JSON.parse(t))?e[n]:null},Y=i(void 0),J=function(t){var e=t.children,o=t.config,i=r((function(){return{userHasInteracted:function(){s({type:"isActive",value:!0})},setConfig:function(n){var t=n.config,e=n.value;"colors"===t&&s({type:"setColors",value:e})}}}),[]),l={colors:o.colors,screenStripes:o.screenStripes,autoFocus:o.autoFocus,isActive:o.autoFocus},c=a((function(n,t){switch(t.type){case"isActive":return b(b({},n),{isActive:t.value});case"setColors":return W("colors",t.value),b(b({},n),{colors:t.value});default:return n}}),l),u=c[0],s=c[1];return n(Y.Provider,b({value:{state:u,action:i}},{children:e}),void 0)},Q=function(){var n=l(Y);if(void 0===n)throw new Error("useTerminal must be used within a TerminalContextProvider.");return n},X=function(n){if("function"==typeof n){var t=n.toString();return 2*JSON.stringify(t).length}return n.reduce((function(n,t){var e=t.toString();return n+2*JSON.stringify(e).length}),0)},$={getFakeFileSize:X,getDir:function(n,t){for(var e=t.split("\\"),o=n,i=0;i<e.length;i++)if(""!==e[i]){if(!o.files[e[i]])return;o=o.files[e[i]].c}return o},getCommandsSize:function(n){return n.reduce((function(n,t){var e=2*(t.alias?t.alias.toString().length:0),o=t.help?t.help.toString().length:0;return t.action?n+(X([t.action])+o+e):n}),0)},fullDirPath:function(n){return"C:\\".concat(n)},formatPrompt:function(n){return"C:\\".concat(n,">")}},Z={run:function(n){var t=n.name,e=n.args,o=n.files,i=n.actualDir;if(!e&&("cd"===t||"chdir"===t))return{};if("cd\\"===t||"chdir\\"===t)return{configTerminal:{config:"actualDir",value:""}};var r=/\.\./;if(r.test(t)&&""===i)return{output:[{action:"add",value:["Error: You can't move back from root.",""]}]};if(r.test(t)&&""!==i)return{configTerminal:{config:"actualDir",value:""}};if("\\"===e[0]&&1===e.length)return{configTerminal:{config:"actualDir",value:""}};if("\\"===e[0]&&e.length>1){var a=e.substring(1),l=$.getDir(o,a);return console.log(a),console.log(l),l?{configTerminal:{config:"actualDir",value:a}}:{output:[{action:"add",value:["This directory doesn't exists.",""]}]}}if("\\"!==e[0]){a=i+"\\"+e,l=$.getDir(o,a);var c=""===i?e:"".concat(i,"\\").concat(e);return console.log(c),l?{configTerminal:{config:"actualDir",value:c}}:{output:[{action:"add",value:["This directory doesn't exists.",""]}]}}return{output:[{action:"add",value:["Error: Some strange error has occurred.",""]}]}},help:["CHDIR (change directory) is a command used to switch directories.","","CHDIR [path]   If path directory is available in the current directory, it takes you into path directory.","CHDIR \\[path]  If path directory is available, it would first move back to the root of the drive and then go into the path directory.","CHDIR\\   Goes to the highest level (the root) of the drive.","CHDIR..  Moves back one directory.","","CD [path]   If path directory is available in the current directory, it takes you into path directory.","CD \\[path]  If path directory is available, it would first move back to the root of the drive and then go into the path directory.","CD\\   Goes to the highest level (the root) of the drive.","CD..  Moves back one directory.",""]},nn={run:function(){return{output:[{action:"clear"}]}},help:["Clears the command prompt screen."]},tn=["#000000","#0000aa","#00aa00","#00aaaa","#aa0000","#aa00aa","#aa5500","#aaaaaa","#555555","#5555ff","#55ff55","#55ffff","#ff5555","#ff55ff","#ffff55","#ffffff"],en=["black","blue","green","aqua","red","purple","yellow","white","gray","lightblue","lightgreen","lightaqua","lightred","lightpurple","lightyellow","brightwhite"],on=function(n,t){switch(n){case"name":return"Invalid Color Name Exception: provided color name ".concat(t," is not a valid name\n\r\n\r\n        Valid names are: ").concat(en.join(", "));case"color":return"Invalid Color Exception: provided color is not valid \n\r\n\r\n        Valid color are: ".concat(tn.join(", "))}},rn={getHexByColor:function(n){var t=tn.indexOf(n);if(-1===t)throw on("color",n);return t.toString(16)},getColorByName:function(n){var t=en.indexOf(n);if(-1===t)throw on("name",n);return tn[t]},getColorByHex:function(n){return tn[parseInt(n,16)]},allowedColors:tn},an=["The COLOR command is used to configure the terminal colors.","","COLOR [HH]","","Color attributes are specified by TWO hex digits -- the first corresponds to the background; the second the foreground. Digits MUST BE diferent. Each digit can be any of the below values:","","0 = Black       8 = Gray","1 = Blue        9 = Light Blue","2 = Green       A = Light Green","3 = Aqua        B = Light Aqua","4 = Red         C = Light Red","5 = Purple      D = Light Purple","6 = Yellow      E = Light Yellow","7 = White       F = Bright White",""],ln={run:function(n){var t=n.args;return t&&/[0-9A-Fa-f]{2}/g.test(t)&&t[0]!==t[1]?{output:[{action:"add",value:["Colors changed successfully.",""]}],configTerminal:{config:"colors",value:{background:rn.getColorByHex(t[0]),color:rn.getColorByHex(t[1])}}}:{output:[{action:"add",value:an}]}},help:an},cn=["The DIR command displays information about files and directories, and how much disk space is available.","","DIR [path] [/a[:Attributes]]","","/a:Attributes\t   Displays only files with the specified file attributes. Attributes is a series of letters, each representing an attribute as shown below.","","h: shows hidden files",""],un={run:function(n){var t,e=n.args,o=n.files,i=n.actualDir,r=function(n,t,e,o){var i=0,r=0,c=0;if(!e.files)return S(S([],a(t),!0),l(n,i,r,c),!0);var u=Object.keys(e.files).reduce((function(n,t){var a="";return(o||"h"!==e.files[t].a[1])&&("f"===e.files[t].t||"e"===e.files[t].t||"s"===e.files[t].t?(i++,c+=e.files[t].s,a="".concat(t).concat(" ".repeat(28-t.length)).concat(e.files[t].s.toLocaleString("en-US",{minimumFractionDigits:0}))):(r++,a="".concat(t).concat(" ".repeat(20-t.length),"&ltDIR&gt")),n.push(a)),n}),[]);return!u||v.isEmpty(u)?S(S([],a(t),!0),l(n,i,r,c),!0):S(S(S([],a(t),!0),u,!0),l(n,i,r,c),!0)},a=function(n){var t=c();return["","Volume in drive C is ".concat(t[1]),"Volume version is ".concat(t[2]),"","Directory of ".concat($.fullDirPath(n)),"",""]},l=function(n,t,e,o){var i,r=(4194304-n.totalSize).toLocaleString("en-US",{minimumFractionDigits:0});return["","   ".concat(t," File(s)   ").concat(null!==(i=o.toLocaleString("en-US",{minimumFractionDigits:0}))&&void 0!==i?i:0," bytes"),"   ".concat(e," Dir(s)   ").concat(r," bytes free"),"",""]},c=function(){var n=navigator.userAgent.match(/(MSIE|(?!Gecko.+)Firefox|(?!AppleWebKit.+Chrome.+)Safari|(?!AppleWebKit.+)Chrome|AppleWebKit(?!.+Chrome|.+Safari)|Gecko(?!.+Firefox))(?: |\/)([\d.apre]+)/);return null!=n?n:"OS"},u=!1,s=e.match(/\/a:([a-zA-Z]+)/);if(s&&s[1]&&s[1].includes("h"))u=!0;else if(s&&s[1]&&!s[1].includes("h"))return{output:[{action:"add",value:S(["Error: ".concat(s[0]," is not a valid argument."),""],cn,!0)}]};if(""===e||s&&e===s[0]){var d=$.getDir(o,i);if(d)return{output:[{action:"add",value:r(o,i,d,u)}]}}return e.split(" ").forEach((function(n){if(null!==s&&n!==s[0]||!s){var e=n,a="\\"===e[0]?e:i+e,l=$.getDir(o,a);l&&(t=r(o,a,l,u))}})),t?{output:[{action:"add",value:t}]}:{output:[{action:"add",value:["Error: directory does not exist.",""]}]}},help:cn},sn=function(n,t){var e=null==t?void 0:t.replace("%n",n.toLowerCase());return null==e?void 0:e.replace("%N",n.toUpperCase())},dn=function(n){var t=n.name,e=n.messages;return{output:[{action:"add",value:[sn(t,e.helpNotAvailable),""]}]}},fn={commandNotFound:function(n){var t=n.name,e=n.messages;return{output:[{action:"add",value:[sn(t,e.notFound),""]}]}},toBeImplemented:function(n){var t=n.name,e=n.messages;return{output:[{action:"add",value:[sn(t,e.toBeImplemented),""]}]}},cantBeExecuted:function(n){var t=n.name,e=n.messages;return{output:[{action:"add",value:[sn(t,e.cantBeExecuted),""]}]}},helpNotAvailable:dn,link:function(n,t){return'<a href="'.concat(n,'" target="_blank" >').concat(t,"</a>")}},mn=function(n){var t=n.allCommands,e=n.args;if(!e)return{output:[{action:"add",value:S(S(["","HELP","","The HELP command is used to access the help for available commands.","","HELP [command]","","command\tDisplays help information on that command.","","Help is available for those commands:",""],t.reduce((function(n,t){return t.help&&n.push(t.name.toUpperCase()),n}),[]).sort(),!0),[""],!1)}]};var o,i=t.filter((function(n){return n.name===e||n.alias&&n.alias.includes(e)}));return i[0]&&i[0].help?(o="function"==typeof i[0].help?i[0].help():i[0].help,{output:[{action:"add",value:["",e.toUpperCase(),""]},{action:"add",value:o},{action:"add",value:[""]}]}):dn(b(b({},n),{name:e}))},pn=["____ ____ ____ ____ ___","|__/ |___ |__| |     | ","|  \\ |___ |  | |___  | ","","      ___  ____ ____ ","   __ |  \\ |  | [__  __    ","      |__/ |__| ___]     ","      ","___ ____ ____ _  _ _ _  _ ____ _    "," |  |___ |__/ |\\/| | |\\ | |__| |    "," |  |___ |  \\ |  | | | \\| |  | |___ ","","","This project was made by ".concat(fn.link("https://tpabarbosa.github.io/#/contact","Tatiana Barbosa")," with create-react-app and typescript. It's a simple component to mimic the behavior of a DOS command line interface."),"","","By now only a few commands are available, but much more can be done to improve it. See ".concat(fn.link("https://github.com/tpabarbosa","documentation")," to get more information."),"","",'Thanks to "VileR" from '.concat(fn.link("https://int10h.org/oldschool-pc-fonts","THE OLDSCHOOL PC FONT RESOURCE")," for adapting and providing various oldschool fonts. WebPlus_IBM_VGA_9x16.woff was the chosen font for this project."),""],vn={run:function(){return{output:[{action:"add",value:pn}]}},help:pn},hn={run:function(){return x(void 0,void 0,void 0,(function(){return _(this,(function(n){switch(n.label){case 0:return[4,function(){return x(void 0,void 0,void 0,(function(){return _(this,(function(n){return[2,new Promise((function(n){setTimeout((function(){n(!0)}),3e3)}))]}))}))}().then()];case 1:return n.sent(),[2,{output:[{action:"remove",value:3},{action:"add",value:["","Finished async command",""]}]}]}}))}))},waitingMessage:["Loading...","","Please wait..."]},gn=function(){var n=c(0),t=n[0],e=n[1],o=c(null),i=o[0],r=o[1],a=Q().state,l=a.isActive,s=a.autoFocus;u((function(){l&&i&&i.focus(),!l&&s&&i&&i.focus()}),[i,l,s]);var d=function(n){var t,e,o=0;return window.getSelection&&(t=window.getSelection())&&t.rangeCount&&(e=t.getRangeAt(0)).commonAncestorContainer.parentNode===n&&(o=e.endOffset),o},f=function(n,t){var e=document.createRange(),o=window.getSelection();null!==n.firstChild?e.setStart(n.firstChild,t):e.setStart(n,t),e.collapse(!0),o&&(o.removeAllRanges(),o.addRange(e))};return{caretCorrection:t,updateCaretPosition:function(){var n=null==i?void 0:i.textContent,t=i?d(i):0;e(t-n.length),i&&i.focus()},input:i,setPosition:function(n){var t=null==i?void 0:i.textContent;i&&f(i,n),e(n-t.length)},setInputRef:function(n){r(n)}}},yn=function(n,t){return n?"repeating-linear-gradient(6deg, ".concat(t,"e0 1px, ").concat(t," 6px)"):"".concat(t)},wn=function(n){if(n)return g(I||(I=k(["\n            "," \n            ","\n        "],["\n            "," \n            ","\n        "])),void 0!==n.color?"color: ".concat(n.color,";"):";",void 0!==n.background?"background: ".concat(yn("1"===q("stripes"),n.background),";"):";")},bn=g(E||(E=k(["\n    font-family: 'IBM VGA 9x16', monospace !important;\n    font-size: 18px !important;\n    line-height: 18px !important;\n    outline: none;\n    margin: 0;\n    white-space: pre-wrap;\n    word-wrap: break-word;\n"],["\n    font-family: 'IBM VGA 9x16', monospace !important;\n    font-size: 18px !important;\n    line-height: 18px !important;\n    outline: none;\n    margin: 0;\n    white-space: pre-wrap;\n    word-wrap: break-word;\n"]))),Cn=y(F||(F=k(["\n    50% {\n        opacity: 1;\n    }\n"],["\n    50% {\n        opacity: 1;\n    }\n"]))),xn=y(T||(T=k(["\n    50% {\n    border-color: transparent;\n    }\n"],["\n    50% {\n    border-color: transparent;\n    }\n"]))),_n=h.div(A||(A=k(["\n    height: 100%;\n    width: 100%;\n    margin: 0;\n    padding: 0;\n    overflow-x: hidden;\n    overflow-y: auto;\n    text-align: left;\n    padding-bottom: 1px;\n    text-shadow: 7px 0px 20px #808080a8;\n    color:  ",";\n    background: ",";\n    a { \n        color: ",";\n        background-color: ",";\n    }\n"],["\n    height: 100%;\n    width: 100%;\n    margin: 0;\n    padding: 0;\n    overflow-x: hidden;\n    overflow-y: auto;\n    text-align: left;\n    padding-bottom: 1px;\n    text-shadow: 7px 0px 20px #808080a8;\n    color:  ",";\n    background: ",";\n    a { \n        color: ",";\n        background-color: ",";\n    }\n"])),(function(n){return n.colors.color}),(function(n){return yn(n.stripes,n.colors.background)}),(function(n){return n.colors.background}),(function(n){return n.colors.color})),Sn=h.div(P||(P=k(["\n    width: 134%;\n    height: 100%;\n    word-break: break-all;\n    font-family: 'IBM VGA 9x16', monospace !important;\n    font-size: 18px !important;\n    line-height: 18px !important;\n    transform: scaleX(0.75);\n    position: relative;\n    left: -16.7%;\n    \n"],["\n    width: 134%;\n    height: 100%;\n    word-break: break-all;\n    font-family: 'IBM VGA 9x16', monospace !important;\n    font-size: 18px !important;\n    line-height: 18px !important;\n    transform: scaleX(0.75);\n    position: relative;\n    left: -16.7%;\n    \n"]))),kn=h.div(O||(O=k(["\n    height: ",";\n    width: 100%;\n    margin: 0;\n    padding: 0;\n    overflow-x: hidden;\n    overflow-y: auto;\n    text-align: left;\n    padding-bottom: 1px;\n    text-shadow: 7px 0px 20px #808080a8;\n    color:  ",";\n    background: ",";\n"],["\n    height: ",";\n    width: 100%;\n    margin: 0;\n    padding: 0;\n    overflow-x: hidden;\n    overflow-y: auto;\n    text-align: left;\n    padding-bottom: 1px;\n    text-shadow: 7px 0px 20px #808080a8;\n    color:  ",";\n    background: ",";\n"])),(function(n){return n.fullscreen?"100%":"auto"}),(function(n){return n.colors.color}),(function(n){return yn(n.stripes,n.colors.background)})),Dn=h.div(H||(H=k(["\n    /* width: 134%;\n    height: 100%;\n    word-break: break-all;\n    font-family: 'IBM VGA 9x16', monospace !important;\n    font-size: 18px !important;\n    line-height: 18px !important;\n    transform: scaleX(0.75);\n    position: relative;\n    left: -16.7%; */\n    \n"],["\n    /* width: 134%;\n    height: 100%;\n    word-break: break-all;\n    font-family: 'IBM VGA 9x16', monospace !important;\n    font-size: 18px !important;\n    line-height: 18px !important;\n    transform: scaleX(0.75);\n    position: relative;\n    left: -16.7%; */\n    \n"]))),In=h.div(N||(N=k(["\n    outline: none;\n    margin: 0;\n    ","\n"],["\n    outline: none;\n    margin: 0;\n    ","\n"])),(function(n){return wn(n.colors)})),En=h.div(M||(M=k(["\n    padding: 4px 8px 0 8px;\n"],["\n    padding: 4px 8px 0 8px;\n"]))),Fn=h.div(B||(B=k(["\n\n    ","\n    ","\n"],["\n\n    ","\n    ","\n"])),(function(n){return n.flashing?g(R||(R=k(["\n        animation: "," 1.5s infinite; \n        opacity: 0;"],["\n        animation: "," 1.5s infinite; \n        opacity: 0;"])),Cn):""}),(function(n){return wn(n.colors)})),Tn=h.div(L||(L=k(["\n"],["\n"]))),An=h.pre(z||(z=k(["\n    ","\n    \n"],["\n    ","\n    \n"])),bn),Pn=h.span(U||(U=k(["\n    padding-left: 8px;\n    outline: none;\n    margin: 0;\n    display: inline-block;\n\n    ","\n\n    pre {\n        display: inline;\n        ","\n    }\n"],["\n    padding-left: 8px;\n    outline: none;\n    margin: 0;\n    display: inline-block;\n\n    ","\n\n    pre {\n        display: inline;\n        ","\n    }\n"])),(function(n){return wn(n.colors)}),bn),On=h.div(V||(V=k(["\n    display: inline;\n    outline: none;\n    visibility: visible;\n    caret-color: transparent;\n    outline: none;\n    margin: 0;\n    padding-left: 8px;\n\n    ::selection {\n        color: black;\n        background: gray;\n    }\n"],["\n    display: inline;\n    outline: none;\n    visibility: visible;\n    caret-color: transparent;\n    outline: none;\n    margin: 0;\n    padding-left: 8px;\n\n    ::selection {\n        color: black;\n        background: gray;\n    }\n"]))),Hn=h.span(G||(G=k(["\n    border-bottom: 2px solid;\n    animation: "," 1s step-end infinite;\n    position: relative;\n    top: -3px;\n    display: inline-block;\n    line-height: 16px;\n    left: ","ch;\n    ","\n\n"],["\n    border-bottom: 2px solid;\n    animation: "," 1s step-end infinite;\n    position: relative;\n    top: -3px;\n    display: inline-block;\n    line-height: 16px;\n    left: ","ch;\n    ","\n\n"])),xn,(function(n){return n.positionCorrection}),(function(n){return wn(n.colors)})),Nn=s((function(e,o){var i=e.onClick,r=e.onInput,a=e.onKeyDown,l=e.onKeyPress,s=e.onKeyUp,d=e.id,f=e.prompt,m=void 0===f?"":f,p=e.colors,v=e.caretColors,h=C(e,["onClick","onInput","onKeyDown","onKeyPress","onKeyUp","id","prompt","colors","caretColors"]),g=c(!1),y=g[0],w=g[1],x=gn();u((function(){if(!y){var n=document.getElementById(d);n&&x.setInputRef(n),w((function(n){return!n}))}}),[y,d,x]);return t(Pn,b({},h,{colors:p},{children:[n("pre",{children:m},void 0),n(On,{ref:o,id:d,contentEditable:"true",onClick:function(n){i&&i(n),x.updateCaretPosition()},onInput:function(n){r&&r(n),x.updateCaretPosition()},onKeyUp:function(n){s&&s(n),x.updateCaretPosition()},onKeyDown:function(n){a&&a(n),x.updateCaretPosition()},onKeyPress:function(n){l&&l(n),x.updateCaretPosition()},autoCorrect:"off",autoCapitalize:"none",spellCheck:!1,inputMode:"text"},void 0),n(Mn,{correction:x.caretCorrection,colors:v},void 0)]}),void 0)})),Mn=function(t){var e=t.correction,o=t.colors;return n(Hn,b({positionCorrection:e,colors:o},{children:"Â "}),void 0)},Rn=function(t){var e=t.children,o=t.colors,i=C(t,["children","colors"]);return n(In,b({colors:o},i,{children:n(En,{children:e},void 0)}),void 0)},Bn=function(o){var i=o.output,r=o.typewriter,a=o.flashing,l=void 0!==a&&a,s=o.colors,m=C(o,["output","typewriter","flashing","colors"]),p=d(null),h=c([]),g=h[0],y=h[1],w=d(null),S=f((function(n,t){return x(void 0,void 0,void 0,(function(){return _(this,(function(e){switch(e.label){case 0:return[4,new Promise((function(e){var o=n?n.split(""):[],i=setInterval((function(){var n,r;o.length>0&&(t.textContent?t.textContent+=null!==(n=o.shift())&&void 0!==n?n:"":t.textContent=null!==(r=o.shift())&&void 0!==r?r:""),0===o.length&&(clearInterval(i),e(!0))}),r.typeInterval);n||(clearInterval(i),e(!0))}))];case 1:return[2,e.sent()]}}))}))}),[r]);return u((function(){p.current&&r.isTypewriting&&!v.isEqual(i,g)&&i.length>0&&(!function(n){x(void 0,void 0,void 0,(function(){var t,e,o,i,a;return _(this,(function(l){switch(l.label){case 0:for(t=[],e=0;e<n.length;e++)t.push(null!==(a=n[e].children[0].textContent)&&void 0!==a?a:""),n[e].children[0].textContent="";o=0,l.label=1;case 1:return o<n.length?(i=n[o].children[0],[4,S(t[o],i).then()]):[3,4];case 2:l.sent(),w.current&&w.current.scrollIntoView({block:"end"}),o===n.length-1&&r.isTypewriting&&r.endTypewriting(),l.label=3;case 3:return o++,[3,1];case 4:return[2]}}))}))}(p.current.children),y(i));r.isTypewriting||0===g.length||y([])}),[g,S,r.isTypewriting,i,p]),t(e,{children:[t(Fn,b({},m,{colors:s,flashing:l,ref:p},{children:["object"==typeof i&&i.length>0&&i.map((function(t,e){return n(Tn,{children:""!==t?n(An,{dangerouslySetInnerHTML:{__html:t}},void 0):n("br",{},void 0)},"".concat(e,"|").concat(t))})),"string"==typeof i&&i.length>0&&n(Tn,{children:""!==i?n(An,{dangerouslySetInnerHTML:{__html:i}},void 0):n("br",{},void 0)},void 0)]}),void 0),n("div",{ref:w},void 0)]},void 0)};Rn.Typewriter=function(o){var i=o.output,r=o.flashing,a=void 0!==r&&r,l=o.colors,c=C(o,["output","flashing","colors"]);return t(e,{children:[n(Rn.Print,b({output:i.outputHistory},c,{colors:l,flashing:a}),void 0),n(Bn,b({typewriter:i.typewriter,output:i.lastOutput},c,{colors:l,flashing:a}),void 0)]},void 0)},Rn.Print=function(o){var i=o.output,r=o.flashing,a=void 0!==r&&r,l=o.colors,c=C(o,["output","flashing","colors"]),s=d(null),f=d(null);return u((function(){f.current&&f.current.scrollIntoView({block:"end"})})),t(e,{children:[t(Fn,b({},c,{colors:l,flashing:a,ref:s},{children:["object"==typeof i&&i.length>0&&i.map((function(t,e){return n(Tn,{children:""!==t?n(An,{dangerouslySetInnerHTML:{__html:t}},void 0):n("br",{},void 0)},"".concat(e,"|").concat(t))})),"string"==typeof i&&i.length>0&&n(Tn,{children:""!==i?n(An,{dangerouslySetInnerHTML:{__html:i}},void 0):n("br",{},void 0)},void 0)]}),void 0),n("div",{ref:f},void 0)]},void 0)};var Ln,zn=i(void 0),Un=function(t){var e=t.children,o=t.config,i=r((function(){return{startRunningCommand:function(){s({type:"isRunningCommand",value:!0})},endRunningCommand:function(){s({type:"isRunningCommand",value:!1})},setActualCmd:function(n){s({type:"setActualCmd",value:n})}}}),[]),l={allCommands:o.commands,shouldAllowHelp:o.shouldAllowHelp,actualCmd:null,isRunningCommand:!1,messages:o.messages},c=a((function(n,t){switch(t.type){case"isRunningCommand":return b(b({},n),{isRunningCommand:t.value});case"setActualCmd":return b(b({},n),{actualCmd:t.value});default:return n}}),l),u=c[0],s=c[1];return n(zn.Provider,b({value:{state:u,action:i}},{children:e}),void 0)},Vn=function(){var n=l(zn);if(void 0===n)throw new Error("useTerminalCommand must be used within a TerminalCommandContextProvider.");return n},Gn=function(){var n=m();return{ref:n,getText:function(){var t="";return n.current&&(t=n.current.textContent?n.current.textContent:""),t.trim()},setText:function(t){n.current&&(n.current.textContent=t)},setFocus:function(){n.current&&n.current.focus()}}},jn=function(e){var o=e.children,i=e.colors,r=e.stripes,a=e.fullscreen,l=void 0!==a&&a,c=C(e,["children","colors","stripes","fullscreen"]),s=Q(),f=d(null);return u((function(){f.current&&f.current.scrollIntoView({block:"end"})})),n(kn,b({},c,{colors:null!=i?i:s.state.colors,stripes:null!=r?r:s.state.screenStripes,fullscreen:l},{children:t(Dn,{children:[o,n("div",{ref:f},void 0)]},void 0)}),void 0)},Kn=function(e){var o=e.name,i=e.args,r=e.outputHandler,a=Vn(),l=Gn(),u=c(""),s=u[0],d=u[1],f={background:rn.getColorByName("red"),color:rn.getColorByName("brightwhite")};return t(jn,b({colors:f,fullscreen:!("with-output"!==i||!a.state.isRunningCommand)},{children:["with-output"===i&&a.state.isRunningCommand&&n(Rn,b({style:{height:"95%"}},{children:n(Rn.Print,{output:["just testing... Type your name: ".concat(s," ")]},void 0)}),void 0),n(Nn,{onInput:function(n){return function(n){n.nativeEvent.data,d(l.getText())}(n)},onKeyDown:function(n){return function(n){if("Enter"!==n.key);else{n.preventDefault();var t=l.getText(),e=["","Hello, ".concat(""===t?"Unkown Person":t,"!"),"","Finishing command ".concat(o," ").concat(i,"..."),""];if(r){var c="with-output"===i?2:4;r.addToQueue(["with-output"===i?{action:"clear"}:{action:"remove",value:c},{action:"add",value:e}])}a.action.endRunningCommand()}}(n)},id:"dynamic_input",ref:l.ref,prompt:">>>"},void 0)]}),void 0)},Wn=["The TYPE command displays the contents of a text file. However, it does not allow you to edit the file, or add new text.","","The TYPE command has no options.","","TYPE [filename]","","Filename is the name of the file to show.",""],qn={run:function(n){var t=n.args,e=n.actualDir,o=n.files;if(!t)return{output:[{action:"add",value:S(["Error: TYPE command requires an argument.",""],Wn,!0)}]};var i=$.getDir(o,e),r=!!(null==i?void 0:i.files[t])&&(null==i?void 0:i.files[t]);return r?"f"!==r.t?{output:[{action:"add",value:["","MZÃ‰â™¥â™¦  Â©@Ã“â™«â–¼â•‘â™«â”¤ â•!Â©â˜ºLâ•!.",'$â™£Â·âˆŸAÃ¸rÃAÃ¸rÃAÃ¸rÃUÂ­wÃ½@Ã¸rÃUÂ­qÃ½CÃ¸rÃUÂ­vÃ½PÃ¸rÃAÃ¸sÃbÃ¸rÃUÂ­sÃ½FÃ¸rÃUÂ­zÃ½CÃ¸rÃUÂ­Ã¬Ã@Ã¸rÃUÂ­pÃ½@Ã¸rÃRichAÃ¸rÃPEdÃ¥â™ MÃ(Â­"â™‚â˜»â™«Â¶$0Â¶â–º@â˜ºâ–ºâ˜»',"","","@â• ' â””\"Tâ–º â†‘â˜º(!â–ºâ˜º.textÃ“   â–º","â™¦ '.rdataâ• ","â™«@@.dataxâ™ 0â˜»â†‘@â””.pdataâ• @â˜»,","",""]}]}:"string"==typeof r.c?{output:[{action:"add",value:["",r.c,""]}]}:{output:[{action:"add",value:S(S([""],r.c,!0),[""],!1)}]}:{output:[{action:"add",value:["File ".concat(t," doesn't exists."),""]}]}},help:Wn},Yn=["The VER command displays the version of react-dos-terminal."],Jn={run:function(n){if(""!==n.args)return{output:[{action:"add",value:S(["Error: VER command doesn't have arguments.",""],Yn,!0)}]};return{output:[{action:"add",value:["","react-dos-terminal version: ".concat("0.1.0 - February 8, 2022 18:13:01"),""]}]}},help:Yn},Qn=[{name:"test-static",alias:["static"],action:function(n){var t=n.name,e=n.args;return{output:[{action:"add",value:["Testing command: ".concat(t),"",e?"Error: this command doesn't have arguments.":"",""]}]}}},{name:"test-dynamic",alias:["dynamic"],action:function(t){var e=t.name,o=t.args,i=["Now running command: ".concat(e,"."),"","Please enter your name:"];return o&&"with-output"!==o&&i.push("Error: Unknown argument ".concat(o)),i.push(""),{output:[{action:"add",value:"with-output"===o?"":i}],dynamic:{element:n(Kn,{name:e,args:o},void 0),options:{shouldHideTerminalOutput:"with-output"===o}}}}},{name:"test-async",alias:["async"],action:hn.run,async:{waitingMessage:hn.waitingMessage}},{name:"cls",alias:["clear"],action:nn.run,help:nn.help},{name:"ver",action:Jn.run,help:Jn.help},{name:"color",action:ln.run,help:ln.help},{name:"ðŸ˜Ž",action:function(){return{output:[{action:"add",value:["","Oh, no!!!","","You found my secreat code!!!","","ðŸ˜±ðŸ˜±ðŸ˜±ðŸ˜±ðŸ˜±ðŸ˜±","",""]}]}}}],Xn=[{name:"react-dos-terminal",action:vn.run}],$n=[{name:"type",action:qn.run,help:qn.help},{name:"dir",alias:["ls"],action:un.run,help:un.help},{name:"cd",alias:["cd..","cd\\","chdir","chdir..","chdir\\"],action:Z.run,help:Z.help},{name:"edit",action:fn.toBeImplemented}],Zn=[{name:"help",alias:["/?"],action:mn}],nt=function(n){var t=0,e=n.reduce((function(n,e){var o,i,r={},a="";"directory"===e.type?r=nt(e.content):a=("file"===e.type&&"string"==typeof e.content||"file"===e.type&&e.content,e.content);var l="directory"===e.type?"d":"file"===e.type?"f":"exec-file"===e.type?"e":"s",c={c:"directory"===e.type?r:a,a:e.attributes,t:l},u=null!==(i=e.fakeFileSize)&&void 0!==i?i:0,s=et(e.name,c)+u;return t+=s,n.files=b(b({},n.files),((o={})[e.name]=b(b({},c),{s:s}),o)),n.totalSize=t,n}),{});return e},tt=function(n,t){var e=n.filter((function(n){return"directory"===n.type})),o=[];return e.forEach((function(n){var e=t.filter((function(t){return"directory"===t.type&&t.name===n.name}));if(e[0]){var i=it(n,e[0]),r=n.content,a=e[0].content,l=ot(r,a);i.content=S([],l,!0),o.push(i)}})),o},et=function(n,t){var e,o=2*(n.length+3);if("e"===t.t||"s"===t.t){var i=t.c;o+=$.getCommandsSize([i])}else if("f"===t.t)o+=2*JSON.stringify(t.c).length;else{o+=null!==(e=t.c.totalSize)&&void 0!==e?e:0}return o},ot=function(n,t){var e=S([],n,!0);return t.forEach((function(t){if("file"===t.type||"exec-file"===t.type||"system-file"===t.type)if(n.filter((function(n){return n.name===t.name}))[0]){var o=t.name.match(/(.+?)(\.[^.]*$|$)/);o&&o[1]&&o[2]&&e.push({name:"".concat(o[1],"(1)").concat(o[2]),type:t.type,attributes:t.attributes,content:t.content})}else e.push(t)})),e},it=function(n,t){var e=n.content,o=t.content;return{name:n.name,type:"directory",content:tt(e,o),attributes:rt(n,t)+at(n,t)}},rt=function(n,t){return"s"===n.attributes[0]||"s"===t.attributes[0]?"s":"r"===n.attributes[0]||"r"===t.attributes[0]?"r":"w"},at=function(n,t){return"h"===n.attributes[1]||"h"===t.attributes[1]?"h":""},lt={createFakeFileSystem:function(n,t){if(!n)return{files:{},totalSize:0};if(!t)return nt(n);var e=tt(n,t),o=ot(n,t),i=nt(n),r=nt(t),a=nt(o),l=nt(e),c=b(b(b(b({},i.files),r.files),a.files),l.files);return{files:c,totalSize:Object.values(c).reduce((function(n,t){return n+t.s}),0)}},createCommands:function(n,t){if(!t)return n;var e=n.reduce((function(n,e){var o=t.filter((function(n){return e.name===n.name}));return o.length>0?n.push(b(b({},e),o[0])):n.push(e),n}),[]),o=t.reduce((function(n,t){return!e.filter((function(n){return v.isEqual(t.name,n.name)}))[0]&&n.push(t),n}),[]);return S(S([],e,!0),o,!0)},excludeCommands:function(n,t){return t&&0!==t.length?"all"===t?[]:n.filter((function(n){return!t.includes(n.name)})):n}},ct=function(n){var t=n.input,e=gn();u((function(){t.current&&e.setInputRef(t.current)}),[t,e]);var o=c([]),i=o[0],r=o[1],a=c(i.length),l=a[0],s=a[1];return{add:function(n){""!==n.trim()&&n.trim()!==i[i.length-1]?(r(S(S([],i,!0),[n.trim()],!1)),s(i.length+1)):s(i.length)},up:function(){var n;if(0===l)return e.input.textContent=i[0],e.setPosition(0),i[0];var t=null!==(n=i[l-1])&&void 0!==n?n:"";return e.input.textContent=t,e.setPosition(t.length),s((function(n){return n-1})),t},down:function(){var n;if(l===i.length)return e.input.textContent="",e.setPosition(0),"";var t=null!==(n=i[l+1])&&void 0!==n?n:"";return e.input.textContent=t,e.setPosition(t.length),s((function(n){return n+1})),t},length:l}},ut=function(n){var t=c([{action:"add",value:n}]),e=t[0],o=t[1],i=c([]),r=i[0],a=i[1],l=c([]),s=l[0],d=l[1],f=c(!1),m=f[0],p=f[1],v=c(10),h=v[0],g=v[1],y=function(){p(!0)},w=function(n){d(n)};return u((function(){if(e.length>0&&!m){switch(e[0].action){case"add":y(),"string"==typeof e[0].value?w([e[0].value]):w(e[0].value);break;case"remove":t=e[0].value,(i=S([],r,!0)).splice(0-t),a(i);break;case"clear":a([])}var n=S([],e,!0);n.shift(),o(n)}var t,i}),[e,m]),{outputHistory:r,addToHistory:function(n){a("string"==typeof n?function(t){return S(S([],t,!0),[n],!1)}:function(t){return S(S([],t,!0),n,!0)})},outputQueue:e,addToQueue:function(n){o((function(t){return S(S([],t,!0),n,!0)}))},lastOutput:s,typewriter:{isTypewriting:m,startTypewriting:y,endTypewriting:function(){a((function(n){return S(S([],n,!0),s,!0)})),d([]),p(!1)},typeInterval:h,changeTypeInterval:function(n){g(n)}}}},st=function(e){var o=e.children,i=e.colors,r=e.stripes,a=C(e,["children","colors","stripes"]),l=Q(),c=d(null);return u((function(){c.current&&c.current.scrollIntoView({block:"end"})})),n(_n,b({colors:null!=i?i:l.state.colors,stripes:null!=r?r:l.state.screenStripes},{children:t(Sn,b({},a,{children:[o,n("div",{ref:c},void 0)]}),void 0)}),void 0)},dt=i(void 0),ft=function(t){var e=t.children,o=t.config,i=r((function(){return{setFiles:function(n){s({type:"files",value:n})},setActualDir:function(n){s({type:"setDir",value:n})}}}),[]),l={actualDir:o.actualDir,allFiles:o.allFiles},c=a((function(n,t){switch(t.type){case"setDir":return W("actualDir",t.value),b(b({},n),{actualDir:t.value});case"files":return b(b({},n),{files:t.value});default:return n}}),l),u=c[0],s=c[1];return n(dt.Provider,b({value:{state:u,action:i}},{children:e}),void 0)},mt=function(){var n=l(dt);if(void 0===n)throw new Error("useFileSystem must be used within a FileSystemContextProvider.");return n},pt=function(n){var t=n.action,e=n.outputHandler,o=Q(),i=mt(),r=Vn(),a=r.state,l=a.messages,c=a.shouldAllowHelp,u=i.state,s=u.actualDir,d=u.allFiles,f=r.state.allCommands,m=function(n){var t=n.indexOf(" "),e="",o="",i=!1;if(-1!==t?(e=n.substring(0,t).trim(),o=n.substring(t+1).trim()):e=n.trim(),c){var r=/\/\?/;r.test(e)&&"/?"!==e?(i=!0,e=e.substring(0,e.length-2)):"/?"===o?i=!0:r.test(e)||"/?"!==e||(i=!0)}return{name:e,args:o,isHelp:i}},p=function(n){var t=n.name,e=n.files,o=n.actualDir;if(!v.isEmpty(e)){var i=[o,"","\\system"].reduce((function(n,o){if(v.isEmpty(n)){var i=$.getDir(e,o);if(i&&i.files){if(i.files[t]&&("e"===i.files[t].t||"s"===i.files[t].t))return i.files[t].c;if(i.files[t+".com"]&&("e"===i.files[t+".com"].t||"s"===i.files[t+".com"].t))return i.files[t+".com"].c;if(i.files[t+".exe"]&&("e"===i.files[t+".exe"].t||"s"===i.files[t+".exe"].t))return i.files[t+".exe"].c}}return n}),{});return v.isEmpty(i)?void 0:i}};return{run:function(n){return x(void 0,void 0,void 0,(function(){var a,c,u,v,h,g,y,w,C,S;return _(this,(function(k){return a=m(n),c=a.name,u=a.args,v=a.isHelp,e.addToHistory("".concat($.formatPrompt(s)," ").concat(n)),""===c?(r.action.setActualCmd(null),[2]):(h={name:c,args:u,allCommands:f,messages:l,actualDir:s,files:d},g=function(n,a){r.action.setActualCmd(b({name:c,args:u,waitingMessage:a},n)),void 0!==n.configTerminal&&(o.action.setConfig(n.configTerminal),"actualDir"===n.configTerminal.config&&i.action.setActualDir(n.configTerminal.value)),n.output&&e.addToQueue(n.output),!a&&r.action.startRunningCommand(),n.dynamic?t("NEW_CMD","dynamic"):t("NEW_CMD","static")},y=function(n){return x(void 0,void 0,void 0,(function(){var o,i,r;return _(this,(function(a){switch(a.label){case 0:return(o=null===(r=null==n?void 0:n.async)||void 0===r?void 0:r.waitingMessage)&&(e.addToQueue([{action:"add",value:o}]),t("NEW_CMD","async")),n.action?[4,n.action(h)]:[3,2];case 1:return i=a.sent(),g(i,o),[2];case 2:return g(fn.commandNotFound(h)),[2]}}))}))},w=function(n){n.help?g(mn(b(b({},h),{name:"help",args:c}))):g(fn.helpNotAvailable(h))},C=f.filter((function(n){var t;return n.name.toLowerCase()===c.toLowerCase()||(null===(t=n.alias)||void 0===t?void 0:t.find((function(n){return n.toLowerCase().includes(c.toLowerCase())})))})),C[0]?v?w(C[0]):y(C[0]):(S=p(h))?v?w(C[0]):y(S):g(fn.commandNotFound(h)),[2])}))}))}}},vt=function(n){var t=c(n.initialState),e=t[0],o=t[1],i=f((function(t,i){var r=n.states[e].actions[t];if(!r)throw new Error('Invalid action "'.concat(t,'" for state "').concat(e,'"'));r.newState&&o(r.newState),r.onTransition&&r.onTransition(i)}),[e]);return u((function(){n.initialEffect&&n.initialEffect()}),[]),u((function(){n.machineEffect&&n.machineEffect()}),n.machineEffectDependencies),u((function(){var t=n.states[e].effect;t&&t()}),n.statesEffectDependencies?S(S([],n.statesEffectDependencies,!0),[e,n.states],!1):[e,n.states]),[e,i]},ht=function(n){var t=n.outputHandler,e=Vn(),o=e.state.isRunningCommand,i=t.outputQueue,r=t.typewriter.isTypewriting,a=e.action,l=a.endRunningCommand,u=a.setActualCmd,s=c(""),d=s[0],f=s[1],m=function(){l(),u(null),f(""),h("FINISH_CMD")},p=vt({initialState:"IDDLE",statesEffectDependencies:[o,r,i,d],states:{IDDLE:{actions:{NEW_CMD:{newState:"RUNNING_COMMAND",onTransition:function(n){f(n)}}}},RUNNING_COMMAND:{effect:function(){o||"dynamic"!==d?o&&0===i.length&&!r&&"dynamic"!==d&&""!==d&&m():m()},actions:{FINISH_CMD:{newState:"IDDLE"}}}}}),v=p[0],h=p[1];return{state:v,action:h}},gt=function(n){var t=n.element,e=n.outputHandler;return p(t.type,b(b({},t.props),{outputHandler:e}),null)},yt=function(e){var o,i,r=e.initialOutput,a=c(!1),l=a[0],s=a[1],d=Q(),f=mt().state.actualDir,m=null===(i=null===(o=Vn().state)||void 0===o?void 0:o.actualCmd)||void 0===i?void 0:i.dynamic,p=Gn(),v=ct({input:p.ref}),h=ut(r),g=ht({outputHandler:h}),y=g.state,w=g.action,C=pt({state:y,action:w,outputHandler:h});return u((function(){var n;"RUNNING_COMMAND"===y&&(null===(n=null==m?void 0:m.options)||void 0===n?void 0:n.shouldHideTerminalOutput)&&s(!0),"RUNNING_COMMAND"!==y&&s(!1)}),[y,m]),t(st,b({onClick:function(){return p&&p.setFocus()}},{children:[!l&&n(Rn,{children:n(Rn.Typewriter,{output:h},void 0)},void 0),"RUNNING_COMMAND"===y&&m&&n(gt,{element:null==m?void 0:m.element,outputHandler:h},void 0),"RUNNING_COMMAND"!==y&&!h.typewriter.isTypewriting&&n(Nn,{onKeyUp:function(n){switch(d.state.isActive||d.action.userHasInteracted(),n.key){case"ArrowUp":return n.preventDefault(),void v.up();case"ArrowDown":return n.preventDefault(),void v.down();case"Enter":n.preventDefault();var t=p.getText();return C.run(t),p.setText(""),void v.add(t);default:return}},id:"terminal_input",ref:p.ref,prompt:$.formatPrompt(f)},void 0)]}),void 0)},wt=function(n){var t=q("i"),e=b(b({},j.loadingScreen),n),o=c(!1),i=o[0],r=o[1];return u((function(){!i&&function(n,t){var e;switch(null!==(e=n.shouldShow)&&void 0!==e?e:"first-time"){case"always":return!0;case"never":return!1;default:return"1"!==t}}(e,t)&&(r(!0),setTimeout((function(){r(!1)}),e.loadingTime))}),[]),{isLoading:i,content:e.messageOrElement}},bt=[{name:"readme.txt",type:"file",content:vn.help,attributes:"s"},{name:"system",type:"directory",attributes:"s",content:[{name:"doskey.exe",type:"system-file",attributes:"sh",content:{name:"doskey",action:fn.cantBeExecuted},fakeFileSize:$.getFakeFileSize([ct,gn])},{name:"help.com",type:"exec-file",attributes:"s",content:{name:"help",action:mn},fakeFileSize:$.getFakeFileSize(mn)}]},{name:"command.com",type:"system-file",attributes:"sh",content:{name:"command",action:fn.cantBeExecuted},fakeFileSize:$.getCommandsSize(Qn)+$.getFakeFileSize([pt,gn,ht,Un,jn])},{name:"io.sys",type:"system-file",attributes:"sh",content:{name:"io",action:fn.cantBeExecuted},fakeFileSize:$.getFakeFileSize([yt,st,J,wt,lt.createCommands,vt])},{name:"msdos.sys",type:"system-file",attributes:"sh",content:{name:"msdos",action:fn.cantBeExecuted},fakeFileSize:$.getFakeFileSize([mt,ft,function(){return $},lt.createFakeFileSystem,Nn,Rn,gt,Gn,ut])}],Ct=function(n){var t,e,o,i,a=q("i"),l=c(!1),s=l[0],d=l[1],f=void 0!==(null==n?void 0:n.shouldPersisteData)?n.shouldPersisteData:j.shouldPersisteData,m=c(j.terminal.colors),p=m[0],v=m[1],h=c(j.terminal.screenStripes),g=h[0],y=h[1],w=c(j.fileSystem.actualDir),C=w[0],x=w[1],_=void 0!==(null===(t=null==n?void 0:n.terminal)||void 0===t?void 0:t.autoFocus)?n.terminal.autoFocus:j.terminal.autoFocus,S=b(b({},j.commands.messages),null===(e=null==n?void 0:n.commands)||void 0===e?void 0:e.messages),k=void 0!==(null===(o=null==n?void 0:n.commands)||void 0===o?void 0:o.excludeCommands)?n.commands.excludeCommands:j.commands.excludeCommands,D=void 0!==(null===(i=null==n?void 0:n.commands)||void 0===i?void 0:i.shouldAllowHelp)?n.commands.shouldAllowHelp:j.commands.shouldAllowHelp,I=r((function(){var t,e,o,i,r,a;if(!1!==(null===(t=null==n?void 0:n.fileSystem)||void 0===t?void 0:t.useFakeFileSystem)){var l=Qn.concat($n);a=lt.createCommands(l,null===(e=null==n?void 0:n.commands)||void 0===e?void 0:e.commands)}else{l=Qn.concat(Zn);a=lt.createCommands(l,null===(o=null==n?void 0:n.commands)||void 0===o?void 0:o.commands)}return!1===(null===(i=null==n?void 0:n.fileSystem)||void 0===i?void 0:i.useInternalFiles)&&(a=lt.createCommands(a,Zn)),D||(a=lt.excludeCommands(a,["help"])),a=lt.createCommands(a,null===(r=null==n?void 0:n.commands)||void 0===r?void 0:r.commands),lt.createCommands(a,Xn)}),[null==n?void 0:n.commands]),E=r((function(){var t,e,o;return!1!==(null===(t=null==n?void 0:n.fileSystem)||void 0===t?void 0:t.useFakeFileSystem)&&!1!==(null===(e=null==n?void 0:n.fileSystem)||void 0===e?void 0:e.useInternalFiles)?lt.createFakeFileSystem(bt,null===(o=null==n?void 0:n.fileSystem)||void 0===o?void 0:o.files):!1!==(null==n?void 0:n.fileSystem.useFakeFileSystem)&&!1===(null==n?void 0:n.fileSystem.useInternalFiles)&&n.fileSystem.files?lt.createFakeFileSystem(n.fileSystem.files):lt.createFakeFileSystem()}),[n]);return u((function(){var t,e,o,i,r,l,c,u,s;null!==a&&"0"!==a&&f?(c=q("colors"),u="1"===q("stripes"),s=q("actualDir")):(c=(null===(t=null==n?void 0:n.terminal)||void 0===t?void 0:t.colors)?null===(e=null==n?void 0:n.terminal)||void 0===e?void 0:e.colors:j.terminal.colors,u=void 0!==(null===(o=null==n?void 0:n.terminal)||void 0===o?void 0:o.screenStripes)?null===(i=null==n?void 0:n.terminal)||void 0===i?void 0:i.screenStripes:j.terminal.screenStripes,s=void 0!==(null===(r=null==n?void 0:n.fileSystem)||void 0===r?void 0:r.actualDir)?null===(l=null==n?void 0:n.fileSystem)||void 0===l?void 0:l.actualDir:j.fileSystem.actualDir,W("stripes",u?"1":"0"),c&&W("colors",c),W("i","1")),v(c),y(u),x(s),d(!0)}),[]),{terminal:{colors:p,screenStripes:g,autoFocus:_},commands:{commands:I,shouldAllowHelp:D,excludeCommands:k,messages:S},isInitialized:s,fileSystem:{actualDir:C,allFiles:E}}},xt=require("../assets/WebPlus_IBM_VGA_9x16.woff"),_t=w(Ln||(Ln=k(["\n    @font-face {\n        font-family: 'IBM VGA 9x16';\n        src: url(",") format('woff');\n        font-weight: normal;\n        font-style: normal;\n    }\n"],["\n    @font-face {\n        font-family: 'IBM VGA 9x16';\n        src: url(",") format('woff');\n        font-weight: normal;\n        font-style: normal;\n    }\n"])),xt),St=function(i){var r=i.config,a=Ct(r),l=wt(null==r?void 0:r.loadingScreen),c=void 0!==(null==r?void 0:r.initialOutput)?r.initialOutput:j.initialOutput;return n(o.StrictMode,{children:a.isInitialized&&t(e,{children:[n(_t,{},void 0),t(J,b({config:a.terminal},{children:[!l.isLoading&&n(ft,b({config:a.fileSystem},{children:n(Un,b({config:a.commands},{children:n(yt,{initialOutput:c},void 0)}),void 0)}),void 0),l.isLoading&&n(kt,{content:l.content},void 0)]}),void 0)]},void 0)},void 0)},kt=function(i){var r=i.content,a=ut(o.isValidElement(r)?[]:"string"==typeof r?[r]:r);return t(e,{children:[!o.isValidElement(r)&&n(st,{children:n(Rn,{children:n(Rn.Typewriter,{output:a,flashing:!0},void 0)},void 0)},void 0),o.isValidElement(r)&&n(gt,{element:r,outputHandler:a},void 0)]},void 0)};export{jn as CommandScreen,Nn as Input,Rn as Output,St as Terminal,rn as colorsHelper,$ as fileSystemHelper,Gn as useInput,vt as useStateMachine,Vn as useTerminalCommand};
//# sourceMappingURL=index.js.map
